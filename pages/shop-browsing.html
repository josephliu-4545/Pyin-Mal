<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Browse curated outfits, grooming kits, and shop-ready looks from Pyin Mal studio partners.">
    <title>Shop Browsing - Pyin Mal</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Itim&family=Rufina:wght@400;700&family=Orbit&family=Jomolhari&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="../css/tailwind.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/main.css">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">

    <style>
        /* Tab transitions */
        .tab-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .tab-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        /* Tab button styles */
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            background: linear-gradient(135deg, var(--color-primary-500), var(--color-accent-500));
            color: white;
            transform: scale(1.02);
        }
        .tab-btn:hover:not(.active) {
            transform: translateY(-2px);
        }
        /* Card hover animations */
        .shop-card-animated {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .shop-card-animated:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        /* Button hover effects */
        .btn-hover-scale {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .btn-hover-scale:hover {
            transform: scale(1.05);
        }
        /* Fade animations */
        @keyframes fadeSlideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-slide-up {
            animation: fadeSlideUp 0.6s ease forwards;
        }
        /* Stagger children */
        .stagger-children > *:nth-child(1) { animation-delay: 0.1s; }
        .stagger-children > *:nth-child(2) { animation-delay: 0.2s; }
        .stagger-children > *:nth-child(3) { animation-delay: 0.3s; }
        .stagger-children > *:nth-child(4) { animation-delay: 0.4s; }
        .stagger-children > *:nth-child(5) { animation-delay: 0.5s; }
        .stagger-children > *:nth-child(6) { animation-delay: 0.6s; }

        /* Barber tab custom styles */
        .barber-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .barber-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 25px 40px rgba(15, 23, 42, 0.12);
        }
        .service-checkbox {
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 6px;
            border: 2px solid rgba(148, 163, 184, 0.7);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .service-checkbox.checked {
            border-color: #8B5CF6;
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            color: #fff;
        }
        .service-item.disabled {
            opacity: 0.4;
            pointer-events: none;
        }
        .service-checkbox.disabled {
            cursor: not-allowed;
        }
        .shop-selected::after {
            content: "Selected shop";
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(236, 72, 153, 0.9);
            color: #fff;
            font-size: 0.65rem;
            letter-spacing: 0.1em;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
        }
        .toast {
            position: fixed;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%);
            background: #EC4899;
            color: #fff;
            padding: 0.75rem 1.5rem;
            border-radius: 999px;
            box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 60;
        }
        .toast.show {
            opacity: 1;
        }
        /* Product Modal Styles */
        #product-modal {
            animation: fadeIn 0.3s ease;
        }
        #product-modal > div {
            animation: slideUp 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        /* Modal Scrollbar Styling */
        #product-modal > div > div::-webkit-scrollbar {
            width: 8px;
        }
        #product-modal > div > div::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        #product-modal > div > div::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 4px;
        }
        #product-modal > div > div::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }
        /* Thumbnail scrollbar */
        #modal-thumbnails::-webkit-scrollbar {
            height: 4px;
        }
        #modal-thumbnails::-webkit-scrollbar-track {
            background: transparent;
        }
        #modal-thumbnails::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 2px;
        }
        #modal-thumbnails::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }
        /* Responsive modal adjustments */
        @media (max-width: 1023px) {
            #product-modal {
                padding: 0;
            }
            #product-modal > div {
                min-height: 100vh;
                border-radius: 0;
            }
        }
        @media (min-width: 1024px) {
            #product-modal:not(.hidden) {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 1rem;
            }
            #product-modal > div {
                width: 90%;
                max-width: 72rem;
                height: auto;
                max-height: 90vh;
                margin: auto;
            }
        #modal-thumbnails {
            height: 110px;
            min-height: 110px;
        }

        
        @media (max-width: 1023px) {
            #modal-thumbnails {
                height: 95px;
                min-height: 95px;
            }
        }
        @media (min-width: 1024px) {
            #modal-thumbnails {
                height: 120px;
                min-height: 120px;
            }
        }
            /* Make modal content more responsive */
            #product-modal > div {
                width: min(90%, 72rem);
            }
            /* Related items - ensure scrolling works on desktop */
            @media (min-width: 1024px) {
                #modal-related-items {
                    max-height: 350px !important;
                    min-height: 200px;
                }
            }
        }
        /* Better scrolling on mobile */
        @media (max-width: 1023px) {
            #product-modal {
                -webkit-overflow-scrolling: touch;
                overflow-y: auto;
            }
            #product-modal > div {
                display: flex;
                flex-direction: column;
            }
        }
        /* Related items container */
        #modal-related-items {
            max-height: 18rem;
        }
        @media (min-width: 1024px) {
            #modal-related-items {
                max-height: 20rem;
            }
        }
        /* Related items scrollbar */
        #modal-related-items::-webkit-scrollbar {
            width: 6px;
        }
        #modal-related-items::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }
        #modal-related-items::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 3px;
        }
        #modal-related-items::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.5);
        }
    </style>
</head>
<body class="bg-white dark:bg-dark-bg text-neutral-900 dark:text-dark-text theme-transition">
    <!-- Navigation -->
    <header class="sticky top-0 z-40 bg-white/95 dark:bg-dark-surface/95 backdrop-blur border-b border-neutral-100 dark:border-dark-border shadow-sm dark:shadow-soft-dark">
        <nav class="container-custom">
            <div class="flex items-center justify-between h-16 gap-6">
                <a href="../index.html" class="flex items-center space-x-1.5 sm:space-x-2">
                    <span class="inline-flex h-7 w-7 sm:h-9 sm:w-9 items-center justify-center rounded-lg sm:rounded-xl bg-primary-600 text-white font-semibold text-xs sm:text-sm">PM</span>
                    <span class="font-rufina text-lg sm:text-xl md:text-2xl font-bold text-primary-600 dark:text-primary-400">Pyin Mal</span>
                </a>

                <div class="hidden lg:flex items-center space-x-6">
                    <a href="../index.html" class="nav-link">Home</a>
                    <div class="relative" data-dropdown="features">
                        <button class="nav-link flex items-center gap-1" data-dropdown-toggle="features-menu" aria-expanded="false">
                            Features
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div id="features-menu" class="hidden absolute top-full left-0 mt-3 w-64 rounded-2xl border border-neutral-100 dark:border-dark-border bg-white dark:bg-dark-card shadow-soft dark:shadow-soft-dark p-4">
                            <ul class="space-y-3 text-sm text-neutral-600 dark:text-neutral-300">
                                <li><a href="haircut-recommendations.html" class="hover:text-primary-600 dark:hover:text-primary-300 flex items-center gap-2"><span>Hair Recommendations</span></a></li>
                                <li><a href="digital-outfit.html" class="hover:text-primary-600 dark:hover:text-primary-300 flex items-center gap-2">Curated Fashion Sets</a></li>
                                <li><a href="model-preview.html" class="hover:text-primary-600 dark:hover:text-primary-300 flex items-center gap-2">Model Preview</a></li>
                            </ul>
                        </div>
                    </div>
                    <a href="../index.html#wish-list" class="nav-link">Favorites</a>
                    <a href="shop-browsing.html" class="nav-link nav-link-active">Shop</a>
                    <div class="relative" data-dropdown="more">
                        <button class="nav-link flex items-center gap-1" data-dropdown-toggle="more-menu" aria-expanded="false">
                            More
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div id="more-menu" class="hidden absolute top-full left-0 mt-3 w-64 rounded-2xl border border-neutral-100 dark:border-dark-border bg-white dark:bg-dark-card shadow-soft dark:shadow-soft-dark p-4">
                            <div class="space-y-3 text-sm text-neutral-600 dark:text-neutral-300">
                                <a href="reviews.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Reviews</a>
                                <a href="contact.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Contact</a>
                                <a href="about.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">About us</a>
                                <a href="faq.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">FAQ</a>
                                <div class="pt-3 mt-3 border-t border-neutral-100 dark:border-dark-border text-xs uppercase text-neutral-400">Future links</div>
                                <a href="pricing.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Pricing</a>
                                <a href="testimonials.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Testimonials</a>
                                <a href="blog.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Blog</a>
                                <a href="locations.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Store Locator</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center space-x-2 sm:space-x-3">
                    <button id="theme-toggle" class="theme-toggle p-1.5 sm:p-2" aria-label="Toggle theme">
                        <span id="theme-icon">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                        </span>
                    </button>
                    <button class="theme-toggle p-1.5 sm:p-2 relative" aria-label="Cart" id="cart-btn">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9m13-9l2 9m-5-4a2 2 0 11-4 0"/></svg>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-primary-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center hidden">0</span>
                    </button>
                    <a href="login.html" class="btn btn-secondary hidden sm:inline-flex px-3 sm:px-5 py-1.5 sm:py-2 text-xs sm:text-sm">Sign In</a>
                    <a href="signup.html" class="btn btn-primary px-3 sm:px-5 py-1.5 sm:py-2 text-xs sm:text-sm">Get Started</a>
                    <button id="mobile-menu-btn" class="lg:hidden p-1.5 sm:p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-dark-card transition-colors" aria-label="Menu">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                </div>
            </div>

            <div id="mobile-menu" class="hidden lg:hidden pb-6 border-t border-neutral-100 dark:border-dark-border mt-3">
                <div class="pt-4 space-y-4">
                    <a href="../index.html" class="block nav-link">Home</a>
                    <div class="bg-neutral-50 dark:bg-dark-surface rounded-2xl p-4">
                        <p class="text-xs uppercase tracking-[0.4em] text-neutral-400 mb-2">Features</p>
                        <div class="flex flex-col space-y-2">
                            <a href="haircut-recommendations.html" class="nav-link">Hair Recommendations</a>
                            <a href="digital-outfit.html" class="nav-link">Curated Fashion Sets</a>
                            <a href="model-preview.html" class="nav-link">Model Preview</a>
                        </div>
                    </div>
                    <a href="../index.html#wish-list" class="block nav-link">Favorites</a>
                    <a href="shop-browsing.html" class="block nav-link nav-link-active">Shop</a>
                    <div class="bg-neutral-50 dark:bg-dark-surface rounded-2xl p-4">
                        <p class="text-xs uppercase tracking-[0.4em] text-neutral-400 mb-2">More</p>
                        <div class="flex flex-col space-y-2">
                            <a href="reviews.html" class="nav-link">Reviews</a>
                            <a href="contact.html" class="nav-link">Contact</a>
                            <a href="about.html" class="nav-link">About us</a>
                            <a href="faq.html" class="nav-link">FAQ</a>
                            <a href="pricing.html" class="nav-link text-neutral-500 dark:text-neutral-400">Pricing (soon)</a>
                            <a href="testimonials.html" class="nav-link text-neutral-500 dark:text-neutral-400">Testimonials (soon)</a>
                            <a href="blog.html" class="nav-link text-neutral-500 dark:text-neutral-400">Blog (soon)</a>
                            <a href="locations.html" class="nav-link text-neutral-500 dark:text-neutral-400">Store Locator (soon)</a>
                        </div>
                    </div>
                    <div class="flex flex-col gap-3">
                        <a href="login.html" class="btn btn-secondary w-full text-center">Sign In</a>
                        <a href="signup.html" class="btn btn-primary w-full text-center">Get Started</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Tab Navigation -->
    <div class="sticky top-16 z-30 bg-white/95 dark:bg-dark-surface/95 backdrop-blur border-b border-neutral-100 dark:border-dark-border">
        <div class="container-custom py-3">
            <div class="flex flex-wrap gap-2 sm:gap-3 justify-center">
                <button data-section="main" class="tab-btn active px-4 sm:px-6 py-2 rounded-full text-sm font-medium bg-neutral-100 dark:bg-dark-card" onclick="showSection('main')">Main</button>
                <button data-section="explore" class="tab-btn px-4 sm:px-6 py-2 rounded-full text-sm font-medium bg-neutral-100 dark:bg-dark-card" onclick="showSection('explore')">Explore</button>
                <button data-section="fashion" class="tab-btn px-4 sm:px-6 py-2 rounded-full text-sm font-medium bg-neutral-100 dark:bg-dark-card" onclick="showSection('fashion')">Fashion</button>
                <button data-section="barbers" class="tab-btn px-4 sm:px-6 py-2 rounded-full text-sm font-medium bg-neutral-100 dark:bg-dark-card" onclick="showSection('barbers')">Baber Shop</button>
                </div>
            </div>
                    </div>

    <!-- MAIN SECTION -->
    <section id="section-main" class="tab-section active">
        <div class="py-16 sm:py-20 md:py-24 bg-gradient-to-br from-neutral-900 via-slate-900 to-neutral-900 text-white">
            <div class="container-custom text-center max-w-4xl mx-auto" data-aos="fade-up">
                <p class="text-xs uppercase tracking-[0.4em] text-white/60 mb-4 animate-fade-slide-up">Welcome to Pyin Mal</p>
                <h1 class="font-rufina text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight mb-6 animate-fade-slide-up" style="animation-delay: 0.1s">Discover Fashion & Grooming Near You</h1>
                <p class="text-base sm:text-lg text-white/80 mb-10 max-w-2xl mx-auto animate-fade-slide-up" style="animation-delay: 0.2s">
                    Browse curated outfits, connect with local stylists, and preview your perfect look before you buy.
                </p>
                <div class="flex flex-wrap gap-4 justify-center animate-fade-slide-up" style="animation-delay: 0.3s">
                    <button onclick="showSection('explore')" class="btn btn-primary btn-hover-scale px-8 py-3 text-base">
                        Explore Shops
                    </button>
                    <a href="model-preview.html" class="btn btn-ghost border-white text-white hover:bg-white/10 btn-hover-scale px-8 py-3 text-base">
                        Model Preview
                    </a>
                    </div>
                    </div>
                </div>

        <!-- Quick Stats -->
        <div class="py-12 bg-neutral-50 dark:bg-dark-surface">
            <div class="container-custom">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center stagger-children">
                    <div class="animate-fade-slide-up opacity-0" data-aos="fade-up">
                        <p class="font-rufina text-3xl font-bold text-primary-600 dark:text-primary-400">50+</p>
                        <p class="text-sm text-neutral-600 dark:text-neutral-400">Fashion Shops</p>
                    </div>
                    <div class="animate-fade-slide-up opacity-0" data-aos="fade-up" data-aos-delay="100">
                        <p class="font-rufina text-3xl font-bold text-primary-600 dark:text-primary-400">30+</p>
                        <p class="text-sm text-neutral-600 dark:text-neutral-400">Barber Shops</p>
                    </div>
                    <div class="animate-fade-slide-up opacity-0" data-aos="fade-up" data-aos-delay="200">
                        <p class="font-rufina text-3xl font-bold text-primary-600 dark:text-primary-400">1000+</p>
                        <p class="text-sm text-neutral-600 dark:text-neutral-400">Products</p>
                    </div>
                    <div class="animate-fade-slide-up opacity-0" data-aos="fade-up" data-aos-delay="300">
                        <p class="font-rufina text-3xl font-bold text-primary-600 dark:text-primary-400">5000+</p>
                        <p class="text-sm text-neutral-600 dark:text-neutral-400">Happy Customers</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- EXPLORE SECTION -->
    <section id="section-explore" class="tab-section">
        <div class="py-12 sm:py-16">
            <div class="container-custom space-y-12">
                <!-- Fashion Shops Category -->
                <div data-aos="fade-up">
                    <div class="flex items-center justify-between mb-6">
                <div>
                            <p class="text-xs uppercase tracking-[0.4em] text-primary-600 dark:text-primary-400 mb-2">Category</p>
                            <h2 class="font-rufina text-3xl font-bold">Fashion Shops</h2>
                </div>
                        <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale">View All</button>
                </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 stagger-children">
                        <!-- Shop Card 1 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-0 animate-fade-slide-up" data-aos="fade-up">
                            <div class="aspect-[4/3]">
                                <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=800&q=80" alt="Urban Style Co" class="w-full h-full object-cover">
            </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Urban Style Co</h3>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400">Contemporary streetwear and casual essentials</p>
                                <div class="flex gap-2">
                                    <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale px-3 py-1.5 text-xs flex-1">View Shop</button>
                                    <a href="model-preview.html?mode=outfit" class="btn btn-primary btn-hover-scale px-3 py-1.5 text-xs flex-1 text-center">Outfit Preview</a>
                                </div>
                            </div>
                        </article>
                        <!-- Shop Card 2 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-0 animate-fade-slide-up" data-aos="fade-up" data-aos-delay="100">
                    <div class="aspect-[4/3]">
                                <img src="https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?auto=format&fit=crop&w=800&q=80" alt="Elegance Boutique" class="w-full h-full object-cover">
                    </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Elegance Boutique</h3>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400">Premium formal wear and evening attire</p>
                                <div class="flex gap-2">
                                    <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale px-3 py-1.5 text-xs flex-1">View Shop</button>
                                    <a href="model-preview.html?mode=outfit" class="btn btn-primary btn-hover-scale px-3 py-1.5 text-xs flex-1 text-center">Outfit Preview</a>
                        </div>
                    </div>
                </article>
                        <!-- Shop Card 3 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-0 animate-fade-slide-up" data-aos="fade-up" data-aos-delay="200">
                    <div class="aspect-[4/3]">
                                <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=800&q=80" alt="Minimal Threads" class="w-full h-full object-cover">
                    </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Minimal Threads</h3>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400">Clean lines and timeless basics</p>
                                <div class="flex gap-2">
                                    <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale px-3 py-1.5 text-xs flex-1">View Shop</button>
                                    <a href="model-preview.html?mode=outfit" class="btn btn-primary btn-hover-scale px-3 py-1.5 text-xs flex-1 text-center">Outfit Preview</a>
                        </div>
                    </div>
                </article>
                        <!-- Shop Card 4 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-0 animate-fade-slide-up" data-aos="fade-up" data-aos-delay="300">
                    <div class="aspect-[4/3]">
                                <img src="https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?auto=format&fit=crop&w=800&q=80" alt="Vintage Vault" class="w-full h-full object-cover">
                    </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Vintage Vault</h3>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400">Curated vintage and retro fashion</p>
                                <div class="flex gap-2">
                                    <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale px-3 py-1.5 text-xs flex-1">View Shop</button>
                                    <a href="model-preview.html?mode=outfit" class="btn btn-primary btn-hover-scale px-3 py-1.5 text-xs flex-1 text-center">Outfit Preview</a>
                        </div>
                    </div>
                </article>
                        <!-- Shop Card 5 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-0 animate-fade-slide-up" data-aos="fade-up" data-aos-delay="400">
                    <div class="aspect-[4/3]">
                                <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?auto=format&fit=crop&w=800&q=80" alt="Luxe Label" class="w-full h-full object-cover">
                    </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Luxe Label</h3>
                                <p class="text-sm text-neutral-600 dark:text-neutral-400">Designer pieces and luxury accessories</p>
                                <div class="flex gap-2">
                                    <button onclick="showSection('fashion')" class="btn btn-secondary btn-hover-scale px-3 py-1.5 text-xs flex-1">View Shop</button>
                                    <a href="model-preview.html?mode=outfit" class="btn btn-primary btn-hover-scale px-3 py-1.5 text-xs flex-1 text-center">Outfit Preview</a>
                        </div>
                    </div>
                </article>
                    </div>
                </div>

                <!-- Barber Shops Category (Preview Only) -->
                <div data-aos="fade-up">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <p class="text-xs uppercase tracking-[0.4em] text-primary-600 dark:text-primary-400 mb-2">Coming Soon</p>
                            <h2 class="font-rufina text-3xl font-bold">Barber Shops</h2>
                        </div>
                        <span class="text-sm text-neutral-500 dark:text-neutral-400 bg-neutral-100 dark:bg-dark-card px-3 py-1 rounded-full">Preview</span>
                    </div>
                    <p class="text-neutral-600 dark:text-neutral-400 mb-6">Full barber features will be added later.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Barber Placeholder 1 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-70" data-aos="fade-up">
                            <div class="aspect-[4/3] bg-neutral-200 dark:bg-dark-surface flex items-center justify-center">
                                <svg class="w-16 h-16 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"/>
                                </svg>
                            </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Classic Cuts Barbershop</h3>
                                <p class="text-sm text-neutral-500">Coming soon...</p>
                            </div>
                        </article>
                        <!-- Barber Placeholder 2 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-70" data-aos="fade-up" data-aos-delay="100">
                            <div class="aspect-[4/3] bg-neutral-200 dark:bg-dark-surface flex items-center justify-center">
                                <svg class="w-16 h-16 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"/>
                                </svg>
                            </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">The Gentleman's Den</h3>
                                <p class="text-sm text-neutral-500">Coming soon...</p>
                            </div>
                        </article>
                        <!-- Barber Placeholder 3 -->
                        <article class="shop-card-animated product-card p-0 overflow-hidden opacity-70" data-aos="fade-up" data-aos-delay="200">
                            <div class="aspect-[4/3] bg-neutral-200 dark:bg-dark-surface flex items-center justify-center">
                                <svg class="w-16 h-16 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"/>
                                </svg>
                            </div>
                            <div class="p-5 space-y-3">
                                <h3 class="font-rufina text-xl font-bold">Modern Fade Studio</h3>
                                <p class="text-sm text-neutral-500">Coming soon...</p>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FASHION SECTION -->
    <section id="section-fashion" class="tab-section">
    <!-- Filters -->
        <div class="py-8 bg-neutral-50 dark:bg-dark-surface">
        <div class="container-custom" data-aos="fade-up">
            <div class="product-card p-5 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                <div class="flex flex-wrap gap-3 text-sm">
                    <div class="filter-field">
                        <label class="text-xs uppercase tracking-[0.4em] text-neutral-400 block mb-1">Price range</label>
                        <select class="form-input" id="price-filter">
                            <option value="all">All</option>
                            <option value="0-30000">0 - 30,000 MMK</option>
                            <option value="30000-60000">30,000 - 60,000 MMK</option>
                            <option value="60000-100000">60,000 - 100,000 MMK</option>
                            <option value="100000+">100,000+ MMK</option>
                        </select>
                    </div>
                    <div class="filter-field">
                        <label class="text-xs uppercase tracking-[0.4em] text-neutral-400 block mb-1">Category</label>
                        <select class="form-input" id="category-filter">
                            <option value="all">All</option>
                                <option value="top">Tops</option>
                                <option value="bottom">Bottoms</option>
                                <option value="shoes">Shoes</option>
                            <option value="accessories">Accessories</option>
                        </select>
                    </div>
                    <div class="filter-field">
                        <label class="text-xs uppercase tracking-[0.4em] text-neutral-400 block mb-1">Shop</label>
                        <select class="form-input" id="shop-filter">
                            <option value="all">All Shops</option>
                            <!-- Shop options will be populated by JS -->
                        </select>
                    </div>
                    <div class="filter-field">
                        <label class="text-xs uppercase tracking-[0.4em] text-neutral-400 block mb-1">Sort by</label>
                        <select class="form-input" id="sort-filter">
                            <option value="newest">Newest</option>
                                <option value="popular">Most popular</option>
                            <option value="price-low">Price: low to high</option>
                            <option value="price-high">Price: high to low</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-3">
                        <input type="search" id="search-input" class="form-input" placeholder="Search products or shops...">
                        <button class="btn btn-primary px-4 btn-hover-scale" id="search-btn">Search</button>
                </div>
            </div>
        </div>
        </div>

        <!-- Product Grid -->
        <div class="py-10 sm:py-14">
        <div class="container-custom space-y-8">
                <div class="text-center" data-aos="fade-up">
                    <p class="text-xs uppercase tracking-[0.4em] text-primary-600 dark:text-primary-400 mb-2">Shop</p>
                    <h2 class="font-rufina text-3xl font-bold">Fashion Products</h2>
                    </div>
                <div id="fashion-products-container" class="space-y-12">
                    <!-- Products grouped by fashion type will be rendered here by JS -->
                </div>
                <div class="text-center">
                    <button class="btn btn-secondary btn-hover-scale" id="load-more-btn">Load more</button>
                </div>
            </div>
        </div>
    </section>

    <!-- BARBER SHOP SECTION -->
    <section id="section-barbers" class="tab-section">
        <!-- Hero -->
        <div class="py-16 bg-gradient-to-br from-primary-600 via-primary-500 to-accent-500 text-white">
            <div class="container-custom max-w-4xl mx-auto text-center space-y-4" data-aos="fade-up">
                <p class="uppercase tracking-[0.4em] text-sm text-white/70">Book your style</p>
                <h2 class="font-rufina text-4xl sm:text-5xl font-bold">Select a Baber Shop partner</h2>
                <p class="text-white/85 text-base sm:text-lg">Choose a salon, stack services, and send everything to Model Preview for haircut mode.</p>
            </div>
        </div>

        <!-- Selected style -->
        <div class="py-10 bg-neutral-50 dark:bg-dark-surface">
            <div class="container-custom max-w-4xl mx-auto" data-aos="fade-up">
                <div class="bg-white dark:bg-dark-card rounded-3xl p-6 shadow-soft dark:shadow-soft-dark flex flex-col sm:flex-row gap-6 items-center">
                    <div class="w-36 h-36 rounded-2xl overflow-hidden bg-neutral-200 dark:bg-dark-surface flex-shrink-0">
                        <img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=600&q=80" alt="Selected hairstyle" class="w-full h-full object-cover">
                    </div>
                    <div class="flex-1 space-y-3 text-center sm:text-left">
                        <p class="text-xs uppercase tracking-[0.4em] text-primary-500">From Model Preview</p>
                        <h3 class="font-rufina text-2xl font-bold">Layered Bob</h3>
                        <p class="text-neutral-600 dark:text-neutral-400 text-sm">A modern take on a classic bob with textured layers for movement. Pairs perfectly with the upcoming grooming drops.</p>
                        <div class="flex flex-wrap justify-center sm:justify-start gap-2 text-xs">
                            <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Oval face</span>
                            <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Medium length</span>
                            <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-300">Medium upkeep</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Barber shops -->
        <div class="py-12">
            <div class="container-custom space-y-10">
                <div class="text-center max-w-3xl mx-auto" data-aos="fade-up">
                    <p class="text-xs uppercase tracking-[0.4em] text-primary-600 dark:text-primary-400 mb-2">Top Baber Shops</p>
                    <h3 class="font-rufina text-3xl font-bold mb-3">Pick a partner salon & stack services</h3>
                    <p class="text-neutral-600 dark:text-neutral-400 text-sm">You can only select services from a single shop per booking to lock availability.</p>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <!-- Template repeated 5 times -->
                    <template id="barber-card-template"></template>

                    <!-- Cards defined manually for clarity -->
                    <article class="barber-card relative bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark overflow-hidden" data-barber="elite-cuts" data-aos="fade-up">
                        <div class="border-b border-neutral-100 dark:border-dark-border p-6 space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-16 h-16 rounded-2xl overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1562322140-8baeececf3df?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover" alt="Elite Cuts">
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-rufina text-xl font-bold">Elite Cuts</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">★★★★★ · 4.9 (128)</p>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">123 Fashion Street</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Premium</span>
                                <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Online booking</span>
                                <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-200">Consult</span>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-wrap gap-2 text-xs font-semibold">
                                <button class="category-btn active px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="all">All</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="haircut">Haircut</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="coloring">Coloring</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="styling">Styling</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="treatment">Treatment</button>
                            </div>
                            <div class="space-y-3">
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Classic Haircut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Precision cut with scissor work</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">65,000 MMK</span>
                                        <div class="service-checkbox" data-service="classic-haircut" data-price="65000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Beard Trim & Shape</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Professional beard sculpt</p>
                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">35,000 MMK</span>
                                        <div class="service-checkbox" data-service="beard-trim" data-price="35000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                        <div>
                                        <p class="font-semibold text-sm">Full Color</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Complete coloring session</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">125,000 MMK</span>
                                        <div class="service-checkbox" data-service="full-color" data-price="125000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="treatment">
                        <div>
                                        <p class="font-semibold text-sm">Deep Conditioning</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Nourishing treatment</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">50,000 MMK</span>
                                        <div class="service-checkbox" data-service="conditioning" data-price="50000"></div>
                                    </div>
                        </div>
                        </div>
                    </div>
                        <div class="flex items-center justify-between gap-4 border-t border-neutral-100 dark:border-dark-border p-6">
                            <p class="font-semibold text-primary-600 dark:text-primary-300 text-sm">Total: <span class="total-price">0 MMK</span></p>
                            <button class="btn btn-secondary text-xs px-4 py-2">View details</button>
                    </div>
                </article>

                    <!-- second card -->
                    <article class="barber-card relative bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark overflow-hidden" data-barber="urban-grooming" data-aos="fade-up" data-aos-delay="100">
                        <div class="border-b border-neutral-100 dark:border-dark-border p-6 space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-16 h-16 rounded-2xl overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1585747860715-2ba37e788b70?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover" alt="Urban Grooming">
                    </div>
                                <div class="flex-1">
                                    <h4 class="font-rufina text-xl font-bold">Urban Grooming</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">★★★★☆ · 4.7 (94)</p>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">456 Modern Avenue</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Modern</span>
                                <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Express</span>
                                <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-200">Student deal</span>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-wrap gap-2 text-xs font-semibold">
                                <button class="category-btn active px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="all">All</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="haircut">Haircut</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="coloring">Coloring</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="styling">Styling</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="treatment">Treatment</button>
                    </div>
                            <div class="space-y-3">
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Signature Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Custom cut + styling consult</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">80,000 MMK</span>
                                        <div class="service-checkbox" data-service="signature-cut" data-price="80000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                                    <div>
                                        <p class="font-semibold text-sm">Skin Fade</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Detailed fade work</p>
                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">60,000 MMK</span>
                                        <div class="service-checkbox" data-service="skin-fade" data-price="60000"></div>
                                    </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                        <div>
                                        <p class="font-semibold text-sm">Balayage</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Hand-painted highlighting</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">175,000 MMK</span>
                                        <div class="service-checkbox" data-service="balayage" data-price="175000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="styling">
                                    <div>
                                        <p class="font-semibold text-sm">Blowout & Style</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Finish + styling</p>
                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">50,000 MMK</span>
                                        <div class="service-checkbox" data-service="blowout" data-price="50000"></div>
                                    </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="treatment">
                        <div>
                                        <p class="font-semibold text-sm">Scalp Treatment</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Therapeutic scalp care</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">65,000 MMK</span>
                                        <div class="service-checkbox" data-service="scalp-treatment" data-price="65000"></div>
                        </div>
                    </div>
                        </div>
                    </div>
                        <div class="flex items-center justify-between gap-4 border-t border-neutral-100 dark:border-dark-border p-6">
                            <p class="font-semibold text-primary-600 dark:text-primary-300 text-sm">Total: <span class="total-price">0 MMK</span></p>
                            <button class="btn btn-secondary text-xs px-4 py-2">View details</button>
                    </div>
                </article>

                    <!-- Additional cards (Gentleman, StyleLab, Precision) -->
                    <article class="barber-card relative bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark overflow-hidden" data-barber="gentleman" data-aos="fade-up">
                        <div class="border-b border-neutral-100 dark:border-dark-border p-6 space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-16 h-16 rounded-2xl overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1599351431202-1e0f0137899a?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover" alt="Gentleman Barbers">
                    </div>
                                <div class="flex-1">
                                    <h4 class="font-rufina text-xl font-bold">Gentleman Barbers</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">★★★★★ · 4.8 (210)</p>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">789 Classic Road</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Traditional</span>
                                <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Hot towel</span>
                                <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-200">Loyalty</span>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-wrap gap-2 text-xs font-semibold">
                                <button class="category-btn active px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="all">All</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="haircut">Haircut</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="coloring">Coloring</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="styling">Styling</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="treatment">Treatment</button>
                            </div>
                            <div class="space-y-3">
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Traditional Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Classic cut with hot towel</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">75,000 MMK</span>
                                        <div class="service-checkbox" data-service="traditional-cut" data-price="75000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Beard Grooming</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Full beard service</p>
                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">45,000 MMK</span>
                                        <div class="service-checkbox" data-service="beard-grooming" data-price="45000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                        <div>
                                        <p class="font-semibold text-sm">Gray Coverage</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Professional coverage</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">95,000 MMK</span>
                                        <div class="service-checkbox" data-service="gray-coverage" data-price="95000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="styling">
                        <div>
                                        <p class="font-semibold text-sm">Traditional Shave</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Straight razor experience</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">60,000 MMK</span>
                                        <div class="service-checkbox" data-service="traditional-shave" data-price="60000"></div>
                                    </div>
                        </div>
                        </div>
                    </div>
                        <div class="flex items-center justify-between gap-4 border-t border-neutral-100 dark:border-dark-border p-6">
                            <p class="font-semibold text-primary-600 dark:text-primary-300 text-sm">Total: <span class="total-price">0 MMK</span></p>
                            <button class="btn btn-secondary text-xs px-4 py-2">View details</button>
                    </div>
                </article>

                    <article class="barber-card relative bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark overflow-hidden" data-barber="style-lab" data-aos="fade-up" data-aos-delay="100">
                        <div class="border-b border-neutral-100 dark:border-dark-border p-6 space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-16 h-16 rounded-2xl overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1593705114312-a0ee03a3f7d0?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover" alt="Style Lab">
                    </div>
                                <div class="flex-1">
                                    <h4 class="font-rufina text-xl font-bold">Style Lab</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">★★★★☆ · 4.6 (87)</p>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">321 Creative Lane</p>
                                </div>
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Creative</span>
                                <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Trend setting</span>
                                <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-200">Color lab</span>
                            </div>
                        </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-wrap gap-2 text-xs font-semibold">
                                <button class="category-btn active px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="all">All</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="haircut">Haircut</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="coloring">Coloring</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="styling">Styling</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="treatment">Treatment</button>
                            </div>
                            <div class="space-y-3">
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Creative Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Artistic shape work</p>
                        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">95,000 MMK</span>
                                        <div class="service-checkbox" data-service="creative-cut" data-price="95000"></div>
                        </div>
                    </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                        <div>
                                        <p class="font-semibold text-sm">Texture Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Movement focused</p>
            </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">105,000 MMK</span>
                                        <div class="service-checkbox" data-service="texture-cut" data-price="105000"></div>
            </div>
        </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                <div>
                                        <p class="font-semibold text-sm">Creative Color</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Custom palette</p>
                </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">140,000 MMK</span>
                                        <div class="service-checkbox" data-service="creative-color" data-price="140000"></div>
                </div>
            </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                <div>
                                        <p class="font-semibold text-sm">Color Correction</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Fix previous color</p>
                            </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">175,000 MMK</span>
                                        <div class="service-checkbox" data-service="color-correction" data-price="175000"></div>
                            </div>
                    </div>
                            </div>
                            </div>
                        <div class="flex items-center justify-between gap-4 border-t border-neutral-100 dark:border-dark-border p-6">
                            <p class="font-semibold text-primary-600 dark:text-primary-300 text-sm">Total: <span class="total-price">0 MMK</span></p>
                            <button class="btn btn-secondary text-xs px-4 py-2">View details</button>
                            </div>
                        </article>

                    <article class="barber-card relative bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark overflow-hidden" data-barber="precision" data-aos="fade-up" data-aos-delay="150">
                        <div class="border-b border-neutral-100 dark:border-dark-border p-6 space-y-4">
                            <div class="flex items-start gap-4">
                                <div class="w-16 h-16 rounded-2xl overflow-hidden">
                                    <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover" alt="Precision Cuts">
                    </div>
                                <div class="flex-1">
                                    <h4 class="font-rufina text-xl font-bold">Precision Cuts</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">★★★★★ · 4.9 (156)</p>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">654 Sharp Street</p>
                            </div>
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-3 py-1 rounded-full bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-200">Precision</span>
                                <span class="px-3 py-1 rounded-full bg-accent-50 text-accent-600 dark:bg-accent-900/20 dark:text-accent-200">Fast</span>
                                <span class="px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 dark:bg-dark-card dark:text-neutral-200">Corporate</span>
                    </div>
                </div>
                        <div class="p-6 space-y-4">
                            <div class="flex flex-wrap gap-2 text-xs font-semibold">
                                <button class="category-btn active px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="all">All</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="haircut">Haircut</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="coloring">Coloring</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="styling">Styling</button>
                                <button class="category-btn px-3 py-1.5 rounded-full bg-neutral-100 dark:bg-dark-surface" data-category="treatment">Treatment</button>
            </div>
                            <div class="space-y-3">
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                                    <div>
                                        <p class="font-semibold text-sm">Executive Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Sharp, professional</p>
        </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">75,000 MMK</span>
                                        <div class="service-checkbox" data-service="executive-cut" data-price="75000"></div>
                                    </div>
                                </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="haircut">
                                    <div>
                                        <p class="font-semibold text-sm">Express Cut</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Quick service</p>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">50,000 MMK</span>
                                        <div class="service-checkbox" data-service="express-cut" data-price="50000"></div>
                    </div>
                            </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="coloring">
                                    <div>
                                        <p class="font-semibold text-sm">Toning Service</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Gloss treatment</p>
                            </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">65,000 MMK</span>
                                        <div class="service-checkbox" data-service="toning" data-price="65000"></div>
                    </div>
                            </div>
                                <div class="service-item flex items-center justify-between gap-3 p-4 rounded-2xl bg-neutral-50 dark:bg-dark-surface" data-category="treatment">
                                    <div>
                                        <p class="font-semibold text-sm">Express Treatment</p>
                                        <p class="text-xs text-neutral-500 dark:text-neutral-400">Quick conditioning</p>
                            </div>
                                    <div class="flex items-center gap-3">
                                        <span class="font-semibold text-primary-600 dark:text-primary-300 text-sm">35,000 MMK</span>
                                        <div class="service-checkbox" data-service="express-treatment" data-price="35000"></div>
                    </div>
                </div>
            </div>
        </div>
                        <div class="flex items-center justify-between gap-4 border-t border-neutral-100 dark:border-dark-border p-6">
                            <p class="font-semibold text-primary-600 dark:text-primary-300 text-sm">Total: <span class="total-price">0 MMK</span></p>
                            <button class="btn btn-secondary text-xs px-4 py-2">View details</button>
                        </div>
                    </article>
                </div>

                <!-- Cart summary -->
                <div class="bg-white dark:bg-dark-card rounded-3xl shadow-soft dark:shadow-soft-dark p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4" data-aos="fade-up">
                    <div>
                        <p class="text-sm text-neutral-500 dark:text-neutral-400 uppercase tracking-[0.4em]">Selected services</p>
                        <p class="text-2xl font-rufina mt-1"><span id="selected-count">0</span> items · <span id="cart-total">0</span> MMK</p>
                        <p class="text-sm text-neutral-500 dark:text-neutral-400 mt-1">All selected services will carry over to the booking flow.</p>
                </div>
                    <div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto">
                        <a href="model-preview.html?mode=haircut" class="btn btn-secondary w-full sm:w-auto text-center">Preview haircut</a>
                        <a href="Orders.html" id="continue-btn" class="btn btn-primary w-full sm:w-auto text-center opacity-70 pointer-events-none">Continue to booking</a>
                </div>
            </div>
        </div>
        </div>

        <div id="toast" class="toast">Added</div>
    </section>

    <!-- Product Detail Modal -->
    <div id="product-modal" class="fixed inset-0 z-50 hidden bg-black/50 dark:bg-black/70 backdrop-blur-sm overflow-y-auto" onclick="closeProductModal(event)">
        <div class="relative bg-white dark:bg-dark-card w-full min-h-full lg:w-auto lg:min-h-0 lg:h-auto lg:rounded-2xl lg:shadow-2xl lg:max-w-6xl lg:max-h-[90vh] lg:my-4 lg:mx-auto flex flex-col" onclick="event.stopPropagation()">
            <!-- Close Button - Top Right -->
            <button onclick="closeProductModal()" class="absolute top-3 right-3 sm:top-4 sm:right-4 z-30 w-9 h-9 sm:w-10 sm:h-10 bg-white/90 dark:bg-dark-surface rounded-full flex items-center justify-center hover:bg-primary-500 hover:text-white transition-colors shadow-lg">
                <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>

            <!-- Scrollable Content Container -->
            <div class="flex flex-col lg:flex-row flex-1 min-h-0 lg:max-h-[90vh] lg:overflow-hidden">
                <!-- Image Gallery Section -->
                <div class="lg:w-1/2 p-4 sm:p-6 space-y-3 sm:space-y-4 flex flex-col flex-shrink-0">
                    <!-- Main Image -->
                    <div class="aspect-square rounded-xl sm:rounded-2xl overflow-hidden bg-neutral-100 dark:bg-dark-surface flex-shrink-0 w-full">
                        <img id="modal-main-image" src="" alt="Product" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/600x600?text=Image+Not+Found'">
                    </div>
                    
                    <!-- Thumbnail Gallery - Responsive sizing -->
                    <div id="modal-thumbnails" class="flex gap-2 overflow-x-auto pb-2 flex-shrink-0">
                        <!-- Thumbnails will be populated by JS -->
                    </div>
                </div>

                <!-- Product Details Section -->
                <div class="lg:w-1/2 p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6 relative lg:overflow-y-auto lg:flex-1 lg:min-h-0 flex flex-col">
                    <!-- Heart/Favorite Button - Top Right of Details Section -->
                    <button id="modal-favorite-btn" class="absolute top-4 right-4 sm:top-6 sm:right-6 z-20 w-9 h-9 sm:w-10 sm:h-10 bg-white/90 dark:bg-dark-surface rounded-full flex items-center justify-center hover:bg-primary-500 hover:text-white transition-colors shadow-lg">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                    </button>

                    <div>
                        <p id="modal-shop" class="text-xs uppercase tracking-wider text-primary-600 dark:text-primary-400 mb-2"></p>
                        <h2 id="modal-name" class="font-rufina text-2xl sm:text-3xl font-bold mb-2 pr-12"></h2>
                        <p id="modal-fashion-type" class="text-sm text-neutral-600 dark:text-neutral-400 mb-4"></p>
                        <p id="modal-price" class="text-xl sm:text-2xl font-bold text-primary-600 dark:text-primary-400"></p>
                    </div>

                    <div class="space-y-4">
                        <div class="flex flex-col gap-2">
                            <button id="modal-add-cart" class="btn btn-primary btn-hover-scale w-full py-2 sm:py-3 text-sm sm:text-base">Add to Cart</button>
                            <div class="flex gap-2">
                                <button id="modal-add-wardrobe" class="btn btn-secondary btn-hover-scale flex-1 py-2 text-xs sm:text-sm">+ Wardrobe</button>
                                <a href="model-preview.html?mode=outfit" class="btn btn-ghost border border-neutral-200 dark:border-dark-border btn-hover-scale flex-1 text-xs py-2 text-center">Preview</a>
                            </div>
                        </div>
                    </div>

                    <!-- Related Items - Scrollable Section -->
                    <div class="border-t border-neutral-200 dark:border-dark-border pt-4 sm:pt-6 flex flex-col flex-1 min-h-0">
                        <h3 class="font-rufina text-lg sm:text-xl font-bold mb-3 sm:mb-4 flex-shrink-0">Related Items</h3>
                        <div id="modal-related-items" class="grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 w-full overflow-y-auto pr-2 flex-1 min-h-0">
                            <!-- Related items will be populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-neutral-900 dark:bg-dark-bg text-white dark:text-dark-text py-10">
        <div class="container-custom flex flex-col gap-6 md:flex-row md:items-center md:justify-between text-sm">
            <div>
                <p class="font-rufina text-2xl">Pyin Mal</p>
                <p class="text-neutral-400 dark:text-neutral-500">Wardrobe & grooming intelligence.</p>
            </div>
            <div class="flex flex-wrap gap-6 text-neutral-400 dark:text-neutral-500">
                <a href="privacy.html" class="hover:text-white">Privacy</a>
                <a href="terms.html" class="hover:text-white">Terms</a>
                <a href="contact.html" class="hover:text-white">Contact</a>
            </div>
            <div class="text-neutral-500 dark:text-neutral-400 text-xs">© 2025 Pyin Mal. All rights reserved.</div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/animations.js"></script>
    <script>
        // Initialize AOS
        document.addEventListener('DOMContentLoaded', () => {
            AOS.init({ duration: 600, once: true });
        });

        // Tab Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.tab-section').forEach(section => {
                section.classList.remove('active');
            });
            // Show target section
            const targetSection = document.getElementById('section-' + sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                // Refresh AOS for new section
                setTimeout(() => AOS.refresh(), 100);
            }
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.section === sectionId) {
                    btn.classList.add('active');
                }
            });
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Wardrobe Storage
        let wardrobe = JSON.parse(localStorage.getItem('wardrobe')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

        // Add item to wardrobe and enrich with transparent mannequin data when available
        async function addToWardrobe(item) {
            if (window.addToWardrobeAsync) {
                // Use shared async helper so items get canTryOn / transparentImg metadata
                wardrobe = await window.addToWardrobeAsync(item);
            } else {
                // Fallback: previous simple behavior
                const exists = wardrobe.find(w => w.id === item.id);
                if (!exists) {
                    wardrobe.push(item);
                    localStorage.setItem('wardrobe', JSON.stringify(wardrobe));
                    showNotification('Added to Digital Wardrobe!', 'success');
                } else {
                    showNotification('Item already in wardrobe', 'info');
                }
            }
        }

        function addToCart(item) {
            cart.push(item);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            showNotification('Added to Cart!', 'success');
        }

        function addToFavorites(item) {
            const exists = favorites.find(f => f.id === item.id);
            if (!exists) {
                favorites.push(item);
                localStorage.setItem('favorites', JSON.stringify(favorites));
                showNotification('Added to Favorites!', 'success');
            } else {
                showNotification('Already in favorites', 'info');
            }
        }

        function updateCartCount() {
            const countEl = document.getElementById('cart-count');
            if (countEl) {
                countEl.textContent = cart.length;
                countEl.classList.toggle('hidden', cart.length === 0);
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 p-4 rounded-xl shadow-lg z-50 transition-all transform translate-x-full ${
                type === 'success' ? 'bg-green-500' : 
                type === 'warning' ? 'bg-yellow-500' : 
                'bg-primary-500'
            } text-white`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => notification.classList.remove('translate-x-full'), 10);
            
            // Remove after delay
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 2500);
        }

        // Helper function to get base name (for grouping same items with different angles)
        function getBaseName(imageName) {
            // Remove extension
            let base = imageName.replace(/\.(jpg|jpeg|png)$/i, '');
            // Remove trailing numbers (for grouping images like "Bold prints tee0.jpg" and "Bold prints tee1.jpg")
            // This handles patterns like "tee0", "tee1", "Tee0", "Tee1", etc.
            base = base.replace(/\s*\d+$/, '').trim();
            // Handle special cases where the base name might have variations
            // Normalize common patterns
            base = base.replace(/\s+(tee|Tee|T-Shirt|T-shirt|TSHIRT)$/i, (match, p1) => {
                // Keep the word but normalize spacing
                return ' ' + p1.toLowerCase();
            });
            return base || imageName.replace(/\.(jpg|jpeg|png)$/i, '');
        }

        // Helper function to get MMK price based on fashion type
        function getMMKPrice(fashionType, shop) {
            const type = fashionType.toLowerCase();
            let basePrice, variance;
            
            if (type.includes('tee') || type.includes('tshirt') || type.includes('shirt') || (type.includes('top') && !type.includes('dress'))) {
                // T-shirts, Tops: 15,000 - 35,000 MMK
                basePrice = 25000;
                variance = 10000;
            } else if (type.includes('hoodie')) {
                // Hoodies: 40,000 - 80,000 MMK
                basePrice = 60000;
                variance = 20000;
            } else if (type.includes('pant')) {
                // Pants: 25,000 - 60,000 MMK
                basePrice = 42500;
                variance = 17500;
            } else if (type.includes('burmese dress')) {
                // Burmese dresses: 30,000 - 100,000 MMK
                basePrice = 65000;
                variance = 35000;
            } else if (type.includes('set')) {
                // Sets: 50,000 - 150,000 MMK
                basePrice = 100000;
                variance = 50000;
            } else if (type.includes('skirt')) {
                // Skirts: 20,000 - 50,000 MMK
                basePrice = 35000;
                variance = 15000;
            } else if (type.includes('longyi')) {
                // Longyi: 15,000 - 40,000 MMK
                basePrice = 27500;
                variance = 12500;
            } else {
                // Default: 20,000 - 50,000 MMK
                basePrice = 35000;
                variance = 15000;
            }
            
            // Add some randomness within the range
            const price = basePrice + Math.floor(Math.random() * variance * 2) - variance;
            return Math.max(10000, price); // Minimum 10,000 MMK
        }

        // Helper function to create product with grouped images
        function createProductGroup(gender, fashionType, shop, baseName, images, productIndex) {
            const id = `${gender}-${shop.toLowerCase().replace(/\s+/g, '-')}-${fashionType.toLowerCase().replace(/\s+/g, '-')}-${productIndex}`;
            const name = baseName || `${fashionType} ${productIndex + 1}`;
            const price = getMMKPrice(fashionType, shop);
            
            return {
                id: id,
                name: name,
                shop: shop,
                fashionType: fashionType,
                gender: gender,
                images: images, // Array of image paths
                image: images[0], // Primary image (first one)
                price: price,
                category: fashionType.toLowerCase().includes('top') || fashionType.toLowerCase().includes('tee') || fashionType.toLowerCase().includes('shirt') ? 'top' :
                         fashionType.toLowerCase().includes('pant') || fashionType.toLowerCase().includes('skirt') || fashionType.toLowerCase().includes('longyi') ? 'bottom' :
                         fashionType.toLowerCase().includes('hoodie') ? 'top' : 'accessories'
            };
        }

        // Helper function to group images by base name
        function groupImagesByBaseName(imageList, basePath) {
            const grouped = {};
            imageList.forEach(imageName => {
                const baseName = getBaseName(imageName);
                if (!grouped[baseName]) {
                    grouped[baseName] = [];
                }
                grouped[baseName].push(`${basePath}/${imageName}`);
            });
            return grouped;
        }

        // Build Fashion Products Data from folder structure
        function buildFashionProducts() {
            const products = [];
            let productIndex = 0;

            // FEMALE PRODUCTS - Fashion Type First, Shop Second
            // dress. top
            const femaleDressTopShops = ['nami', 'Oro', 'T shirt collection'];
            femaleDressTopShops.forEach(shop => {
                const basePath = `../assets/images/Female/dress. top/${shop}`;
                let imageList = [];
                
                if (shop === 'nami') {
                    imageList = Array.from({length: 9}, (_, i) => `nami${i}.jpg`);
                } else if (shop === 'Oro') {
                    imageList = Array.from({length: 9}, (_, i) => `oro ${i + 1}.jpg`);
                } else if (shop === 'T shirt collection') {
                    imageList = ['crest tee.jpg', 'crest tee1.jpg', 'lizx tee1.jpg', 'lizx tee2.jpg', 'VAL3 03 tee1.jpg', 'VAL3 03 tee2.jpg', 'VAL3 spiral1.jpg', 'VAL3 spiral2.jpg', 'VAL3 spiral3.jpg'];
                }
                
                const grouped = groupImagesByBaseName(imageList, basePath);
                Object.keys(grouped).forEach(baseName => {
                    products.push(createProductGroup('female', 'Dress Top', shop, baseName, grouped[baseName], productIndex++));
                });
            });

            // dress.burmese
            const femaleBurmeseShops = ['anastasia', 'Luna', 'luxe', 'Veronica'];
            femaleBurmeseShops.forEach(shop => {
                const basePath = `../assets/images/Female/dress.burmese/${shop}`;
                const imageCount = shop === 'anastasia' ? 21 : shop === 'Luna' ? 12 : shop === 'luxe' ? 14 : 9;
                const imageList = Array.from({length: imageCount}, (_, i) => 
                    shop === 'anastasia' ? `anastasia${i}.jpg` :
                    shop === 'Luna' ? `LUNA${i}.jpg` :
                    shop === 'luxe' ? `LUXE${i}.jpg` :
                    `veronica${i}.jpg`
                );
                
                const grouped = groupImagesByBaseName(imageList, basePath);
                Object.keys(grouped).forEach(baseName => {
                    products.push(createProductGroup('female', 'Burmese Dress', shop, baseName, grouped[baseName], productIndex++));
                });
            });

            // dress.set
            const femaleSetShops = ['Luna', 'oro set'];
            femaleSetShops.forEach(shop => {
                const basePath = `../assets/images/Female/dress.set/${shop}`;
                const imageCount = shop === 'Luna' ? 12 : 13;
                const imageList = Array.from({length: imageCount}, (_, i) => 
                    shop === 'Luna' ? `luna set${i + 1}.jpg` : `oro set${i + 1}.jpg`
                );
                
                const grouped = groupImagesByBaseName(imageList, basePath);
                Object.keys(grouped).forEach(baseName => {
                    products.push(createProductGroup('female', 'Dress Set', shop, baseName, grouped[baseName], productIndex++));
                });
            });

            // dress.skirt (no shop subfolder - use "Online Shop")
            const basePath = `../assets/images/Female/dress.skirt`;
            const skirtImages = Array.from({length: 4}, (_, i) => `oro skirt${i + 1}.jpg`);
            const grouped = groupImagesByBaseName(skirtImages, basePath);
            Object.keys(grouped).forEach(baseName => {
                products.push(createProductGroup('female', 'Dress Skirt', 'Online Shop', baseName, grouped[baseName], productIndex++));
            });

            // MALE PRODUCTS - Shop First, Fashion Type Second (except Burmese dress for men)
            // Burmese dress for men (no shop - use "Online Shop")
            const burmeseBasePath = `../assets/images/Male/Burmese dress for men`;
            const burmeseImages = [];
            for (let i = 0; i < 14; i++) {
                burmeseImages.push(i < 6 ? `longyi${i}.jpg` : `shirt & longyi ${i - 6}.jpg`);
            }
            const burmeseGrouped = groupImagesByBaseName(burmeseImages, burmeseBasePath);
            Object.keys(burmeseGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Burmese Dress', 'Online Shop', baseName, burmeseGrouped[baseName], productIndex++));
            });

            // Malory
            // Malory pants
            const maloryPantsBasePath = `../assets/images/Male/Malory/pants`;
            const maloryPants = ['cargo pant.jpg', 'long pant 1.jpg', 'long pant 3.jpg', 'long pant 6.jpg', 'long pant 7.jpg', 'long pant0.jpg.jpg', 'long pant2.jpg.jpg', 'long pant4.jpg', 'long pant5.jpg', 'short pant0.jpg', 'short pant1.jpg', 'short pant2.jpg', 'short pant3.jpg', 'styple pant0.jpg', 'styple pant1.jpg'];
            const maloryPantsGrouped = groupImagesByBaseName(maloryPants, maloryPantsBasePath);
            Object.keys(maloryPantsGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Pants', 'Malory', baseName, maloryPantsGrouped[baseName], productIndex++));
            });

            // Malory T shirt
            const maloryTeesBasePath = `../assets/images/Male/Malory/T shirt`;
            const maloryTees = ['Bold prints tee0.jpg', 'Bold prints tee1.jpg', 'Dead Inside T-Shirt0.jpg', 'Dead Inside T-Shirt1.jpg', 'I LOVE HATERS TEE0.jpg', 'I LOVE HATERS TEE1.jpg', 'Let It Shine T-Shirt0.jpg', 'Let It Shine T-Shirt1.jpg', 'MENTAL TEE0.jpg', 'MENTAL TEE1.jpg', 'Myanmar Traditional Kayan People Tee0.jpg', 'Myanmar Traditional Kayan People Tee1.jpg', 'Myanmar Traditional Kayan People Tee2.jpg', 'Myanmar Traditional Kayan People Tee3.jpg', 'Purpose T-shirt0.jpg', 'Purpose T-shirt1.jpg', 'Traditional Burma\'s Puppet Tee0.jpg', 'Traditional Burma\'s Puppet Tee1.jpg'];
            const maloryTeesGrouped = groupImagesByBaseName(maloryTees, maloryTeesBasePath);
            Object.keys(maloryTeesGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'T Shirt', 'Malory', baseName, maloryTeesGrouped[baseName], productIndex++));
            });

            // Nrf
            // Nrf Hoodie
            const nrfHoodiesBasePath = `../assets/images/Male/Nrf/Hoodie`;
            const nrfHoodies = ['ABCD 2XL ZIP UP HOODIE0.jpg', 'ABCD 2XL ZIP UP HOODIE1.jpg', 'Aj V1 Hd 0.jpg', 'AJOHN V2 HOODIE.jpg', 'Bias Hd0.jpg', 'Lttv Hd 0.jpg', 'NRF Deathwish hoodie0.jpg', 'NRF Deathwish hoodie1.jpg', 'Nrf x Rowska shirt punk flower0.jpg', 'Nrf x Rowska shirt punk flower1.jpg', 'NRFC ZIP UP HOODIE GREY0.jpg', 'NRFC ZIP UP HOODIE GREY1.jpg', 'NRF™ + GAWLI 2.0hoodie0.jpg', 'NRF™ + GAWLI 2.0hoodie1.jpg', 'PRO-TECT DETACHABLE JACKET 0.jpg', 'PRO-TECT DETACHABLE JACKET 1.jpg', 'V1 INTRODUCTION Hoodie .jpg', 'V2 LOGO Hoodie 0.jpg', 'V2 LOGO Hoodie 1.jpg', 'V3 jacket olive green 0.jpg'];
            const nrfHoodiesGrouped = groupImagesByBaseName(nrfHoodies, nrfHoodiesBasePath);
            Object.keys(nrfHoodiesGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Hoodie', 'Nrf', baseName, nrfHoodiesGrouped[baseName], productIndex++));
            });

            // Nrf Tee
            const nrfTeesBasePath = `../assets/images/Male/Nrf/Tee`;
            const nrfTees = ['ABCD TEE.jpg', 'ABCD TEE0.jpg', 'ACID TSHIRT 0.jpg', 'ACID TSHIRT 1.jpg', 'AJOHN V4 0.jpg', 'AJOHN V4.jpg', 'AJOHN V41.jpg', 'LAPSES TSHIRT OATMEAL0.jpg', 'LAPSES TSHIRT OATMEAL1.jpg', 'LTTV 2.0 DOUBLELAYER 0.jpg', 'LTTV 2.0 DOUBLELAYER 1.jpg', 'nrf ajohn v4 tee.jpg', 'Nrf x rowska shirt 4 0.jpg', 'Nrf x rowska shirt 4 1.jpg', 'NRF+RG Premium tee0.jpg', 'NRF+RG Premium tee1.jpg', 'NRFC Jersey0.jpg', 'NRFC Jersey1.jpg', 'NRF™ + GAWLI 2.0 tee0.jpg', 'NRF™ + GAWLI 2.0 tee1.jpg', 'NRF™ + GAWLI 2.0 tee3.jpg', 'RUBBER TAG TSHIRT 0.jpg', 'RUBBER TAG TSHIRT 1.jpg', 'V4 logo tee0.jpg'];
            const nrfTeesGrouped = groupImagesByBaseName(nrfTees, nrfTeesBasePath);
            Object.keys(nrfTeesGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Tee', 'Nrf', baseName, nrfTeesGrouped[baseName], productIndex++));
            });

            // Set (outfit set from sian store)
            const setBasePath = `../assets/images/Male/Set/outfit set from sian store`;
            const setImages = Array.from({length: 23}, (_, i) => `set${i}.jpg`);
            const setGrouped = groupImagesByBaseName(setImages, setBasePath);
            Object.keys(setGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Set', 'outfit set from sian store', baseName, setGrouped[baseName], productIndex++));
            });

            // VAL3
            // VAL3 Hoodie
            const val3HoodiesBasePath = `../assets/images/Male/VAL3/Hoodie`;
            const val3Hoodies = ['VAL3 crop hoodie 0.jpg', 'VAL3 crop hoodie 1.jpg', 'VAL3 crop hoodie 2.jpg', 'VAL3 hoodie 0.jpg', 'VAL3 hoodie 1.jpg', 'VAL3 hoodie 2.jpg'];
            const val3HoodiesGrouped = groupImagesByBaseName(val3Hoodies, val3HoodiesBasePath);
            Object.keys(val3HoodiesGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Hoodie', 'VAL3', baseName, val3HoodiesGrouped[baseName], productIndex++));
            });

            // VAL3 Pants
            const val3PantsBasePath = `../assets/images/Male/VAL3/Pants`;
            const val3Pants = ['VAL3 Sweat pants🍃0.jpg', 'VAL3 Sweat pants🍃1.jpg'];
            const val3PantsGrouped = groupImagesByBaseName(val3Pants, val3PantsBasePath);
            Object.keys(val3PantsGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'Pants', 'VAL3', baseName, val3PantsGrouped[baseName], productIndex++));
            });

            // VAL3 T shirt
            const val3TeesBasePath = `../assets/images/Male/VAL3/T shirt`;
            const val3Tees = ['VAL3 03 tshirt 0.jpg', 'VAL3 03 tshirt 1.jpg', 'VAL3 03 tshirt 2.jpg', 'VAL3 ETHIC Tee0.jpg', 'VAL3 ETHIC Tee1.jpg', 'VAL3 Polo shirt.jpg', 'VAL3🌀Spiral tee0.jpg', 'VAL3🌀Spiral tee1.jpg', 'VAL3爱 Tee 0.jpg', 'VAL3爱 Tee 1.png', 'VAL3爱 Tee 2.jpg'];
            const val3TeesGrouped = groupImagesByBaseName(val3Tees, val3TeesBasePath);
            Object.keys(val3TeesGrouped).forEach(baseName => {
                products.push(createProductGroup('male', 'T Shirt', 'VAL3', baseName, val3TeesGrouped[baseName], productIndex++));
            });

            return products;
        }

        // Fashion Products Data
        const fashionProducts = buildFashionProducts();
        
        // Initialize current filtered products
        let currentFilteredProducts = fashionProducts;

        // Get unique shops for filter
        function getUniqueShops() {
            const shops = new Set();
            fashionProducts.forEach(product => {
                shops.add(product.shop);
            });
            return Array.from(shops).sort();
        }

        // Get unique fashion types
        function getUniqueFashionTypes() {
            const types = new Set();
            fashionProducts.forEach(product => {
                types.add(product.fashionType);
            });
            return Array.from(types).sort();
        }

        // Populate shop filter dropdown
        function populateShopFilter() {
            const shopFilter = document.getElementById('shop-filter');
            if (!shopFilter) return;
            
            const shops = getUniqueShops();
            shops.forEach(shop => {
                const option = document.createElement('option');
                option.value = shop.toLowerCase().replace(/\s+/g, '-');
                option.textContent = shop;
                shopFilter.appendChild(option);
            });
        }

        // Filter and render products
        let displayedCount = 0;
        const itemsPerPage = 32;

        async function renderFashionProducts(filteredProducts = null) {
            const container = document.getElementById('fashion-products-container');
            if (!container) return;

            const productsToShow = filteredProducts || fashionProducts;
            const productsToDisplay = productsToShow.slice(0, displayedCount + itemsPerPage);

            // Precompute try-on availability per product using transparent PNGs
            if (window.hasTransparentVersion) {
                await Promise.all(productsToDisplay.map(async (product) => {
                    try {
                        product.canTryOn = await window.hasTransparentVersion(product.id);
                    } catch (err) {
                        product.canTryOn = false;
                    }
                }));
            }
            
            // Group products by fashion type
            const groupedByType = {};
            productsToDisplay.forEach(product => {
                if (!groupedByType[product.fashionType]) {
                    groupedByType[product.fashionType] = [];
                }
                groupedByType[product.fashionType].push(product);
            });

            // Render grouped sections
            container.innerHTML = Object.keys(groupedByType).sort().map(fashionType => {
                const typeProducts = groupedByType[fashionType];
                return `
                    <div class="space-y-6" data-aos="fade-up">
                        <div class="flex items-center gap-4">
                            <h3 class="font-rufina text-2xl font-bold">${fashionType}</h3>
                            <span class="text-sm text-neutral-500 dark:text-neutral-400">${typeProducts.length} items</span>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            ${typeProducts.map((product, index) => `
                                <article class="shop-card-animated product-card p-0 overflow-hidden cursor-pointer" data-aos="fade-up" data-aos-delay="${index * 50}" data-shop="${product.shop.toLowerCase().replace(/\s+/g, '-')}" onclick="openProductModal(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                                    <div class="shop-card-media aspect-[4/3] relative">
                                        ${product.canTryOn ? '<span class="absolute top-2 right-2 z-20 bg-green-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow">Try-On Ready</span>' : ''}
                                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/400x300?text=Image+Not+Found'">
                                        <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 dark:bg-dark-card/90 rounded-full flex items-center justify-center hover:bg-primary-500 hover:text-white transition-colors z-10" onclick="event.stopPropagation(); addToFavorites(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
                                        </button>
                                    </div>
                                    <div class="p-4 space-y-3">
                                        <div>
                                            <p class="text-xs uppercase tracking-wider text-neutral-400 mb-1">${product.shop}</p>
                                            <h3 class="font-medium text-sm">${product.name}</h3>
                                            <p class="text-primary-600 dark:text-primary-400 font-bold">${product.price.toLocaleString()} MMK</p>
                                        </div>
                                        <div class="flex flex-col gap-2">
                                            <button onclick="event.stopPropagation(); addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})" class="btn btn-primary btn-hover-scale w-full text-xs py-2">Add to Cart</button>
                                            <div class="flex gap-2">
                                                <button onclick="event.stopPropagation(); addToWardrobe(${JSON.stringify(product).replace(/"/g, '&quot;')})" class="btn btn-secondary btn-hover-scale flex-1 text-xs py-2">+ Wardrobe</button>
                                                <a href="model-preview.html?mode=outfit" onclick="event.stopPropagation();" class="btn btn-ghost border border-neutral-200 dark:border-dark-border btn-hover-scale flex-1 text-xs py-2 text-center">Preview</a>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');

            displayedCount = productsToDisplay.length;
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (loadMoreBtn) {
                loadMoreBtn.style.display = displayedCount >= productsToShow.length ? 'none' : 'inline-flex';
            }

            // Refresh AOS
            setTimeout(() => AOS.refresh(), 100);
        }

        // Filter products
        function filterProducts(resetCount = true) {
            const shopFilter = document.getElementById('shop-filter')?.value || 'all';
            const categoryFilter = document.getElementById('category-filter')?.value || 'all';
            const priceFilter = document.getElementById('price-filter')?.value || 'all';
            const sortFilter = document.getElementById('sort-filter')?.value || 'newest';
            const searchQuery = document.getElementById('search-input')?.value?.toLowerCase().trim() || '';

            let filtered = [...fashionProducts];

            // Filter by shop
            if (shopFilter !== 'all') {
                filtered = filtered.filter(product => 
                    product.shop.toLowerCase().replace(/\s+/g, '-') === shopFilter
                );
            }

            // Filter by category
            if (categoryFilter !== 'all') {
                filtered = filtered.filter(product => product.category === categoryFilter);
            }

            // Filter by price range
            if (priceFilter !== 'all') {
                filtered = filtered.filter(product => {
                    switch(priceFilter) {
                        case '0-30000':
                            return product.price >= 0 && product.price <= 30000;
                        case '30000-60000':
                            return product.price > 30000 && product.price <= 60000;
                        case '60000-100000':
                            return product.price > 60000 && product.price <= 100000;
                        case '100000+':
                            return product.price > 100000;
                        default:
                            return true;
                    }
                });
            }

            // Search by product name or shop name
            if (searchQuery) {
                filtered = filtered.filter(product => 
                    product.name.toLowerCase().includes(searchQuery) ||
                    product.shop.toLowerCase().includes(searchQuery)
                );
            }

            // Sort
            switch(sortFilter) {
                case 'price-low':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
                case 'popular':
                    // For now, just randomize. Can be improved with actual popularity data
                    filtered.sort(() => Math.random() - 0.5);
                    break;
                default: // newest
                    // Keep original order (newest first based on array order)
                    break;
            }

            currentFilteredProducts = filtered;
            if (resetCount) displayedCount = 0;
            renderFashionProducts(filtered);
        }

        // Load more products
        function loadMoreProducts() {
            displayedCount += itemsPerPage;
            renderFashionProducts(currentFilteredProducts || fashionProducts);
        }

        // Product Modal Functions
        let currentModalProduct = null;
        let carouselInterval = null;
        let currentImageIndex = 0;

        function openProductModal(product) {
            currentModalProduct = product;
            currentImageIndex = 0;
            const modal = document.getElementById('product-modal');
            if (!modal) return;

            // Populate modal content
            document.getElementById('modal-name').textContent = product.name;
            document.getElementById('modal-shop').textContent = product.shop;
            document.getElementById('modal-fashion-type').textContent = product.fashionType;
            document.getElementById('modal-price').textContent = `${product.price.toLocaleString()} MMK`;

            // Set up images
            const images = product.images || [product.image];
            setupImageCarousel(images);

            // Set up action buttons
            const addCartBtn = document.getElementById('modal-add-cart');
            const addWardrobeBtn = document.getElementById('modal-add-wardrobe');
            const favoriteBtn = document.getElementById('modal-favorite-btn');
            
            if (addCartBtn) {
                addCartBtn.onclick = () => {
                    addToCart(product);
                    closeProductModal();
                };
            }
            if (addWardrobeBtn) {
                addWardrobeBtn.onclick = () => {
                    addToWardrobe(product);
                };
            }
            if (favoriteBtn) {
                favoriteBtn.onclick = () => {
                    addToFavorites(product);
                };
            }

            // Get related items (same shop AND same fashion type) - no limit, show all
            const relatedItems = fashionProducts.filter(p => 
                p.id !== product.id && 
                p.shop === product.shop && 
                p.fashionType === product.fashionType
            );

            setupRelatedItems(relatedItems);

            // Show modal
            modal.classList.remove('hidden');
            // Add flex class for desktop centering
            if (window.innerWidth >= 1024) {
                modal.classList.add('flex', 'items-center', 'justify-center');
                document.body.style.overflow = 'hidden';
            } else {
                // On mobile, modal container scrolls, body stays scrollable
                document.body.style.overflow = 'hidden';
            }
            
            // Start auto-play carousel after a brief delay
            setTimeout(() => {
                startCarousel(images);
            }, 100);
        }

        function closeProductModal(event) {
            // Prevent event from bubbling if called from button
            if (event) {
                event.stopPropagation();
            }
            
            const modal = document.getElementById('product-modal');
            if (!modal) return;
            
            // If event exists and it's not from the overlay, don't close
            if (event && event.target !== modal && event.target !== event.currentTarget) {
                return;
            }
            
            // Close the modal
            modal.classList.add('hidden');
            modal.classList.remove('flex', 'items-center', 'justify-center');
            document.body.style.overflow = '';
            stopCarousel();
            currentModalProduct = null;
        }

        function setupImageCarousel(images) {
            const mainImage = document.getElementById('modal-main-image');
            const thumbnailsContainer = document.getElementById('modal-thumbnails');
            
            if (!mainImage || !thumbnailsContainer) return;

            // Set main image
            mainImage.src = images[0];
            mainImage.alt = currentModalProduct?.name || 'Product';

            // Create thumbnails with responsive sizing
            const isMobile = window.innerWidth < 1024;
            const thumbSize = isMobile ? '90px' : '100px';
            thumbnailsContainer.innerHTML = images.map((img, index) => `
                <button onclick="selectImage(${index})" class="flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all ${
                    index === 0 ? 'border-primary-500' : 'border-transparent hover:border-primary-300'
                }" style="width: ${thumbSize}; height: ${thumbSize}; min-width: ${thumbSize}; min-height: ${thumbSize};">
                    <img src="${img}" alt="Thumbnail ${index + 1}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/100x100?text=Image+Not+Found'">
                </button>
            `).join('');
        }

        function selectImage(index) {
            if (!currentModalProduct) return;
            const images = currentModalProduct.images || [currentModalProduct.image];
            if (index < 0 || index >= images.length) return;

            currentImageIndex = index;
            const mainImage = document.getElementById('modal-main-image');
            if (mainImage) {
                mainImage.src = images[index];
            }

            // Update thumbnail borders
            const thumbnails = document.querySelectorAll('#modal-thumbnails button');
            thumbnails.forEach((btn, i) => {
                if (i === index) {
                    btn.classList.add('border-primary-500');
                    btn.classList.remove('border-transparent');
                } else {
                    btn.classList.remove('border-primary-500');
                    btn.classList.add('border-transparent');
                }
            });

            // Restart carousel from this index
            stopCarousel();
            startCarousel(images);
        }

        function startCarousel(images) {
            if (images.length <= 1) return;
            
            stopCarousel();
            carouselInterval = setInterval(() => {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                selectImage(currentImageIndex);
            }, 5000); // 5 seconds
        }

        function stopCarousel() {
            if (carouselInterval) {
                clearInterval(carouselInterval);
                carouselInterval = null;
            }
        }

        function setupRelatedItems(relatedItems) {
            const container = document.getElementById('modal-related-items');
            if (!container) return;

            if (relatedItems.length === 0) {
                container.innerHTML = '<p class="col-span-2 text-sm text-neutral-500 dark:text-neutral-400">No related items found.</p>';
                return;
            }

            container.innerHTML = relatedItems.map(product => `
                <article class="product-card p-0 overflow-hidden cursor-pointer rounded-xl" onclick="openProductModal(${JSON.stringify(product).replace(/"/g, '&quot;')})">
                    <div class="aspect-square">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/200x200?text=Image+Not+Found'">
                    </div>
                    <div class="p-2 sm:p-3">
                        <p class="text-xs text-neutral-500 dark:text-neutral-400 truncate">${product.shop}</p>
                        <h4 class="font-medium text-xs sm:text-sm truncate">${product.name}</h4>
                        <p class="text-primary-600 dark:text-primary-400 font-bold text-xs sm:text-sm">${product.price.toLocaleString()} MMK</p>
                    </div>
                </article>
            `).join('');
        }

        // Make functions globally available
        window.openProductModal = openProductModal;
        window.closeProductModal = closeProductModal;
        window.selectImage = selectImage;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Ensure modal is hidden on page load
            const modal = document.getElementById('product-modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex', 'items-center', 'justify-center');
            }
            
            populateShopFilter();
            renderFashionProducts();
            updateCartCount();
            initBarberShopModule();
            
            // Add filter event listeners
            const shopFilter = document.getElementById('shop-filter');
            const categoryFilter = document.getElementById('category-filter');
            const priceFilter = document.getElementById('price-filter');
            const sortFilter = document.getElementById('sort-filter');
            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            
            if (shopFilter) shopFilter.addEventListener('change', filterProducts);
            if (categoryFilter) categoryFilter.addEventListener('change', filterProducts);
            if (priceFilter) priceFilter.addEventListener('change', filterProducts);
            if (sortFilter) sortFilter.addEventListener('change', filterProducts);
            if (searchBtn) searchBtn.addEventListener('click', filterProducts);
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') filterProducts();
                });
            }
            
            // Load more button
            const loadMoreBtn = document.getElementById('load-more-btn');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', loadMoreProducts);
            }
            
            // Close modal on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const modal = document.getElementById('product-modal');
                    if (modal && !modal.classList.contains('hidden')) {
                        closeProductModal();
                    }
                }
            });
        });

        // Barber tab logic
        function initBarberShopModule() {
            const section = document.getElementById('section-barbers');
            if (!section) return;

            const serviceCheckboxes = section.querySelectorAll('.service-checkbox');
            const categoryButtons = section.querySelectorAll('.category-btn');
            const selectedCount = document.getElementById('selected-count');
            const cartTotal = document.getElementById('cart-total');
            const continueBtn = document.getElementById('continue-btn');
            const toast = document.getElementById('toast');
            let selectedServices = [];
            let selectedBarber = null;

            const formatCurrency = (amount) => amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');

            const showToast = (message) => {
                if (!toast) return;
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 2500);
            };

            const updateCart = () => {
                const total = selectedServices.reduce((sum, svc) => sum + svc.price, 0);
                const count = selectedServices.length;
                selectedCount.textContent = count;
                cartTotal.textContent = formatCurrency(total);

                // update per barber totals
                section.querySelectorAll('.barber-card').forEach(card => {
                    const barberId = card.dataset.barber;
                    const barberServices = selectedServices.filter(s => s.barber === barberId);
                    const barberTotal = barberServices.reduce((sum, svc) => sum + svc.price, 0);
                    const totalEl = card.querySelector('.total-price');
                    if (totalEl) totalEl.textContent = `${formatCurrency(barberTotal)} MMK`;
                    card.classList.toggle('shop-selected', barberServices.length > 0);
                });

                if (continueBtn) {
                    if (count > 0) {
                        continueBtn.classList.remove('opacity-70', 'pointer-events-none');
                        continueBtn.classList.add('btn-hover-scale');
                    } else {
                        continueBtn.classList.add('opacity-70', 'pointer-events-none');
                        continueBtn.classList.remove('btn-hover-scale');
                    }
                }

                localStorage.setItem('selectedBarberServices', JSON.stringify(selectedServices));
                localStorage.setItem('selectedBarberShop', selectedBarber);
            };

            const updateServiceAvailability = () => {
                serviceCheckboxes.forEach(box => {
                    const card = box.closest('.barber-card');
                    if (!card) return;
                    const isLocked = selectedBarber && card.dataset.barber !== selectedBarber;
                    box.closest('.service-item').classList.toggle('disabled', Boolean(isLocked));
                    box.classList.toggle('disabled', Boolean(isLocked));
                });
            };

            serviceCheckboxes.forEach(box => {
                box.addEventListener('click', () => {
                    const card = box.closest('.barber-card');
                    const barberId = card?.dataset.barber;
                    const price = parseInt(box.dataset.price, 10);
                    const service = box.dataset.service;

                    if (!selectedBarber) {
                        selectedBarber = barberId;
                        showToast(`Selected ${card.querySelector('.font-rufina').textContent}`);
                    }

                    if (selectedBarber && barberId !== selectedBarber) {
                        showToast('Select services from one Baber shop at a time.');
                        box.classList.add('animate-pulse');
                        setTimeout(() => box.classList.remove('animate-pulse'), 400);
                        return;
                    }

                    if (box.classList.contains('checked')) {
                        box.classList.remove('checked');
                        selectedServices = selectedServices.filter(s => s.service !== service);
                        if (selectedServices.length === 0) selectedBarber = null;
                    } else {
                        box.classList.add('checked');
                        selectedServices.push({ service, price, barber: barberId });
                    }

                    updateServiceAvailability();
                    updateCart();
                });
            });

            categoryButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.dataset.category;
                    const card = btn.closest('.barber-card');
                    card.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    card.querySelectorAll('.service-item').forEach(item => {
                        if (category === 'all' || item.dataset.category === category) {
                            item.style.display = 'flex';
                            item.classList.add('animate-fade-slide-up');
                        } else {
                            item.style.display = 'none';
                            item.classList.remove('animate-fade-slide-up');
                }
            });
        });
            });

            updateCart();
            updateServiceAvailability();
        }

        
    </script>
    <script src="../js/tryon-utils.js"></script>
</body>
</html>
