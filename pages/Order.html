<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Complete your booking at Pyin Mal barbershop - Modern checkout experience">
    <title>Checkout - Pyin Mal</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Itim&family=Rufina:wght@400;700&family=Orbit&family=Jomolhari&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="../css/tailwind.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/main.css">
    
    <!-- Custom Checkout Styles -->
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            --primary-color: #8B5CF6;
            --secondary-color: #EC4899;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        .gradient-text {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gradient-bg {
            background: var(--primary-gradient);
        }

        .payment-method {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .payment-method:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.15);
        }

        .payment-method.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
        }

        .floating-element {
            position: absolute;
            border-radius: 50%;
            background: var(--primary-gradient);
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .service-item {
            transition: all 0.3s ease;
        }

        .service-item:hover {
            background: rgba(139, 92, 246, 0.05);
        }

        .success-modal {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.5);
        }

        .toast {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .checkout-btn {
            background: var(--primary-gradient);
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .checkout-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Dark mode specific styles */
        .dark .payment-method {
            background: rgba(255, 255, 255, 0.05);
        }

        .dark .payment-method.selected {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(236, 72, 153, 0.15) 100%);
        }

        .dark .service-item:hover {
            background: rgba(139, 92, 246, 0.1);
        }
    </style>

    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
</head>
<body class="bg-white dark:bg-dark-bg text-neutral-900 dark:text-dark-text theme-transition">
    <!-- Navigation -->
    <header class="sticky top-0 z-40 bg-white/95 dark:bg-dark-surface/95 backdrop-blur border-b border-neutral-100 dark:border-dark-border shadow-sm dark:shadow-soft-dark">
        <nav class="container-custom">
            <div class="flex items-center justify-between h-16 gap-6">
                <a href="../index.html" class="flex items-center space-x-1.5 sm:space-x-2">
                    <span class="inline-flex h-7 w-7 sm:h-9 sm:w-9 items-center justify-center rounded-lg sm:rounded-xl bg-primary-600 text-white font-semibold text-xs sm:text-sm">PM</span>
                    <span class="font-rufina text-lg sm:text-xl md:text-2xl font-bold text-primary-600 dark:text-primary-400">Pyin Mal</span>
                </a>

                <div class="hidden lg:flex items-center space-x-6">
                    <a href="../index.html" class="nav-link">Home</a>
                    <div class="relative" data-dropdown="features">
                        <button class="nav-link flex items-center gap-1" data-dropdown-toggle="features-menu" aria-expanded="false">
                            Features
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div id="features-menu" class="hidden absolute top-full left-0 mt-3 w-64 rounded-2xl border border-neutral-100 dark:border-dark-border bg-white dark:bg-dark-card shadow-soft dark:shadow-soft-dark p-4">
                            <ul class="space-y-3 text-sm text-neutral-600 dark:text-neutral-300">
                                <li><a href="haircut-recommendations.html" class="hover:text-primary-600 dark:hover:text-primary-300 flex items-center gap-2"><span>Hair Recommendations</span></a></li>
                                <li><a href="model-preview.html" class="hover:text-primary-600 dark:hover:text-primary-300 flex items-center gap-2">Model Preview</a></li>
                            </ul>
                        </div>
                    </div>
                    <a href="saved-fashion.html" class="nav-link">Favorites</a>
                    <a href="shop-browsing.html" class="nav-link">Shop</a>
                    <div class="relative" data-dropdown="more">
                        <button class="nav-link flex items-center gap-1" data-dropdown-toggle="more-menu" aria-expanded="false">
                            More
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                        </button>
                        <div id="more-menu" class="hidden absolute top-full left-0 mt-3 w-64 rounded-2xl border border-neutral-100 dark:border-dark-border bg-white dark:bg-dark-card shadow-soft dark:shadow-soft-dark p-4">
                            <div class="space-y-3 text-sm text-neutral-600 dark:text-neutral-300">
                                <a href="reviews.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Reviews</a>
                                <a href="contact.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Contact</a>
                                <a href="about.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">About us</a>
                                <a href="faq.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">FAQ</a>
                                <a href="pricing.html" class="flex items-center gap-2 hover:text-primary-600 dark:hover:text-primary-300">Pricing</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex items-center space-x-2 sm:space-x-3">
                    <button id="theme-toggle" class="theme-toggle p-1.5 sm:p-2" aria-label="Toggle theme">
                        <span id="theme-icon">
                            <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                        </span>
                    </button>
                    <button class="theme-toggle p-1.5 sm:p-2" aria-label="Cart">
                        <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9m13-9l2 9m-5-4a2 2 0 11-4 0"/></svg>
                    </button>
                    <a href="login.html" class="btn btn-secondary hidden sm:inline-flex px-3 sm:px-5 py-1.5 sm:py-2 text-xs sm:text-sm">Sign In</a>
                    <a href="login.html" class="btn btn-primary px-3 sm:px-5 py-1.5 sm:py-2 text-xs sm:text-sm">Get Started</a>
                    <button id="mobile-menu-btn" class="lg:hidden p-1.5 sm:p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-dark-card transition-colors" aria-label="Menu">
                        <svg class="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                </div>
            </div>

            <div id="mobile-menu" class="hidden lg:hidden pb-6 border-t border-neutral-100 dark:border-dark-border mt-3">
                <div class="pt-4 space-y-4">
                    <a href="../index.html" class="block nav-link">Home</a>
                    <div class="bg-neutral-50 dark:bg-dark-surface rounded-2xl p-4">
                        <p class="text-xs uppercase tracking-[0.4em] text-neutral-400 mb-2">Features</p>
                        <div class="flex flex-col space-y-2">
                            <a href="haircut-recommendations.html" class="nav-link">Hair Recommendations</a>
                            <a href="model-preview.html" class="nav-link">Model Preview</a>
                        </div>
                    </div>
                    <a href="../index.html#wish-list" class="block nav-link">Favorites</a>
                    <a href="shop-browsing.html" class="block nav-link">Shop</a>
                    <div class="flex flex-col gap-3">
                        <a href="login.html" class="btn btn-secondary w-full text-center">Sign In</a>
                        <a href="login.html" class="btn btn-primary w-full text-center">Get Started</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="relative py-12 sm:py-16 overflow-hidden">
        <!-- Floating Background Elements -->
        <div class="floating-element w-32 h-32 top-10 left-10"></div>
        <div class="floating-element w-24 h-24 top-20 right-20" style="animation-delay: 2s;"></div>
        <div class="floating-element w-40 h-40 bottom-10 left-1/4" style="animation-delay: 4s;"></div>
        
        <div class="container-custom relative z-10">
            <div class="text-center max-w-3xl mx-auto" data-aos="fade-up">
                <h1 class="font-rufina text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
                    Complete Your <span>Booking</span>
                </h1>
                <p class="text-lg md:text-xl text-neutral-600 dark:text-neutral-300 mb-8">
                    Review your selected services and secure your appointment at Pyin Mal
                </p>
                <div class="flex items-center justify-center gap-4 text-sm text-neutral-500 dark:text-neutral-400">
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span>Secure Payment</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span>Instant Confirmation</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                        <span>Expert Stylists</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Main Content -->
    <main class="py-12">
        <div class="container-custom">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column: Order Details & Form -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Order Summary -->
                    <div class="bg-white dark:bg-dark-card rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 md:p-8" data-aos="fade-right">
                        <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                            <svg class="w-5 h-5 gradient-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/></svg>
                            Order Summary
                        </h2>
                        
                        <div id="selected-services" class="space-y-4 mb-6">
                            <!-- Services will be populated here -->
                        </div>

                        
                    </div>

                    <!-- Customer Information -->
                    <div class="bg-white dark:bg-dark-card rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 md:p-8" data-aos="fade-right" data-aos-delay="100">
                        <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                            <svg class="w-5 h-5 gradient-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                            Customer Information
                        </h2>

                        <form id="customer-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">First Name *</label>
                                    <input type="text" id="first-name" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                    <span class="text-red-500 text-sm hidden" id="first-name-error">Please enter your first name</span>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Last Name *</label>
                                    <input type="text" id="last-name" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                    <span class="text-red-500 text-sm hidden" id="last-name-error">Please enter your last name</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2">Email Address *</label>
                                <input type="email" id="email" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                <span class="text-red-500 text-sm hidden" id="email-error">Please enter a valid email</span>
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2">Phone Number *</label>
                                <input type="tel" id="phone" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                <span class="text-red-500 text-sm hidden" id="phone-error">Please enter your phone number</span>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Appointment Date *</label>
                                    <input type="date" id="appointment-date" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                    <span class="text-red-500 text-sm hidden" id="date-error">Please select a valid date</span>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Preferred Time *</label>
                                    <select id="appointment-time" required class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition">
                                        <option value="">Select a time</option>
                                        <option value="09:00">9:00 AM</option>
                                        <option value="10:00">10:00 AM</option>
                                        <option value="11:00">11:00 AM</option>
                                        <option value="12:00">12:00 PM</option>
                                        <option value="13:00">1:00 PM</option>
                                        <option value="14:00">2:00 PM</option>
                                        <option value="15:00">3:00 PM</option>
                                        <option value="16:00">4:00 PM</option>
                                        <option value="17:00">5:00 PM</option>
                                        <option value="18:00">6:00 PM</option>
                                    </select>
                                    <span class="text-red-500 text-sm hidden" id="time-error">Please select a time</span>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium mb-2">Special Requests (Optional)</label>
                                <textarea id="special-requests" rows="3" class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-surface focus:outline-none transition resize-none" placeholder="Any special requirements or preferences..."></textarea>
                            </div>
                        </form>
                    </div>

                    <!-- Payment Method -->
                    <div class="bg-white dark:bg-dark-card rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 md:p-8" data-aos="fade-right" data-aos-delay="200">
                        <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                            <svg class="w-5 h-5 gradient-text" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
                            Payment Method
                        </h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="payment-method rounded-xl p-4 border border-neutral-200 dark:border-neutral-600" data-payment="card">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/><path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold">Credit/Debit Card</h3>
                                        <p class="text-sm text-neutral-500 dark:text-neutral-400">Visa, Mastercard, AMEX</p>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method rounded-xl p-4 border border-neutral-200 dark:border-neutral-600" data-payment="mobile">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 2a2 2 0 00-2 2v12a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H7zm3 14a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold">Mobile Payment</h3>
                                        <p class="text-sm text-neutral-500 dark:text-neutral-400">WavePay, KBZ Pay</p>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method rounded-xl p-4 border border-neutral-200 dark:border-neutral-600" data-payment="cash">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold">Pay at Shop</h3>
                                        <p class="text-sm text-neutral-500 dark:text-neutral-400">Cash on arrival</p>
                                    </div>
                                </div>
                            </div>

                            <div class="payment-method rounded-xl p-4 border border-neutral-200 dark:border-neutral-600" data-payment="bank">
                                <div class="flex items-center gap-3">
                                    <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/></svg>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold">Bank Transfer</h3>
                                        <p class="text-sm text-neutral-500 dark:text-neutral-400">Direct bank payment</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Card Details (shown when card is selected) -->
                        <div id="card-details" class="hidden mt-6 p-4 bg-neutral-50 dark:bg-dark-surface rounded-lg">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Card Number</label>
                                    <input type="text" id="card-number" placeholder="1234 5678 9012 3456" class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-bg focus:outline-none transition">
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Expiry Date</label>
                                        <input type="text" id="card-expiry" placeholder="MM/YY" class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-bg focus:outline-none transition">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">CVV</label>
                                        <input type="text" id="card-cvv" placeholder="123" class="form-input w-full px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-dark-bg focus:outline-none transition">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Booking Summary -->
                <div class="lg:col-span-1">
                    <div class="sticky top-24 space-y-6">
                        <!-- Booking Summary Card -->
                        <div class="bg-white dark:bg-dark-card rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 shadow-lg" data-aos="fade-left">
                            <h3 class="text-xl font-bold mb-4">Booking Summary</h3>
                            
                            <div class="space-y-4 mb-6">
                                <!-- Shop Info Section -->
                                <div id="shop-info" class="flex items-center gap-3 p-3 bg-neutral-50 dark:bg-dark-surface rounded-lg">
                                    <div class="w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center">
                                        <img id="shop-photo" src="" alt="Shop" class="w-full h-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                        <div id="shop-icon" class="hidden w-full h-full items-center justify-center">
                                            <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <div>
                                        <h4 id="shop-name" class="font-semibold">Loading shop...</h4>
                                        <p class="text-sm text-neutral-500 dark:text-neutral-400">Your selected barber</p>
                                    </div>
                                </div>

                                <div id="summary-services" class="space-y-2">
                                    <!-- Services will be populated here -->
                                </div>

                                <div class="border-t border-neutral-200 dark:border-neutral-700 pt-4 space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span>Subtotal</span>
                                        <span id="subtotal">0 MMK</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span>Service Fee (10%)</span>
                                        <span id="service-fee">0 MMK</span>
                                    </div>
                                    <div class="flex justify-between font-bold text-lg pt-2 border-t border-neutral-200 dark:border-neutral-700">
                                        <span>Total</span>
                                        <span id="total">0 MMK</span>
                                    </div>
                                </div>
                            </div>

                            <button id="checkout-btn" class="checkout-btn w-full py-4 rounded-xl bg-blue-600 text-white font-semibold text-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed" onclick="window.location.href='../index.html'">
                                Complete Booking
                            </button>

                            <p class="text-xs text-neutral-500 dark:text-neutral-400 text-center mt-4">
                                By completing this booking, you agree to our terms of service and privacy policy
                            </p>
                        </div>

                        <!-- Trust Badges -->
                        <div class="bg-white dark:bg-dark-card rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6" data-aos="fade-left" data-aos-delay="100">
                            <h4 class="font-semibold mb-4">Why Choose Us?</h4>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    <span class="text-sm">Expert Stylists</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    <span class="text-sm">Premium Products</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    <span class="text-sm">Satisfaction Guaranteed</span>
                                </div>
                                <div class="flex items-center gap-3">
                                    <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                                    <span class="text-sm">Flexible Scheduling</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="success-modal" class="hidden fixed inset-0 z-50 success-modal">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/50" onclick="closeSuccessModal()"></div>
            <div class="relative bg-white dark:bg-dark-card rounded-2xl p-8 max-w-md w-full shadow-2xl" data-aos="zoom-in">
                <div class="text-center">
                    <div class="w-20 h-20 mx-auto mb-6 rounded-full gradient-bg flex items-center justify-center">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                    </div>
                    <a href="../index.html"><h3 class="text-2xl font-bold mb-4">Booking Confirmed!</h3>
                    <p class="text-neutral-600 dark:text-neutral-300 mb-6">
                        Your appointment has been successfully booked. We've sent a confirmation email with all the details.
                    </p>
                    <div class="bg-neutral-50 dark:bg-dark-surface rounded-lg p-4 mb-6 text-left">
                        <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">Booking Reference:</p>
                        <p class="font-mono font-bold text-lg" id="booking-reference">#PM202503001</p>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="toggleBookingDetails()" class="flex-1 px-4 py-3 rounded-lg border border-neutral-300 dark:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-dark-surface transition">
                            View Details
                        </button>
                        <button onclick="confirmGoHome()" class="flex-1 px-4 py-3 rounded-lg gradient-bg text-white font-semibold hover:opacity-90 transition">
                            Back Home
                        </button>
                    </div>
                    
                    <!-- Booking Details Section (Hidden by default) -->
                    <div id="booking-details" class="hidden mt-6 text-left">
                        <h4 class="font-semibold mb-3">Booking Details</h4>
                        <div class="bg-neutral-50 dark:bg-dark-surface rounded-lg p-4 space-y-3">
                            <div id="modal-customer-info"></div>
                            <div id="modal-services-info"></div>
                            <div id="modal-appointment-info"></div>
                            <div id="modal-payment-info"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-20 right-4 z-50 space-y-2"></div>

    
    
    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/animations.js"></script>
    
    <!-- Checkout Page Script -->
    <script>
        // Sample data structure
        const barberShops = {
            'pyin-mal-main': {
                name: 'Pyin Mal',
                address: '123 Fashion Street, Yangon',
                logo: '/images/logo.png',
                services: {
                    'haircut': { name: 'Classic Haircut', description: 'Traditional haircut with styling', price: 15000 },
                    'beard-trim': { name: 'Beard Trim & Shape', description: 'Professional beard grooming', price: 10000 },
                    'hair-color': { name: 'Hair Coloring', description: 'Full hair color service', price: 35000 },
                    'facial': { name: 'Gentlemen\'s Facial', description: 'Deep cleansing facial treatment', price: 20000 },
                    'head-massage': { name: 'Head Massage', description: 'Relaxing head massage', price: 8000 },
                    'shave': { name: 'Traditional Shave', description: 'Hot towel straight razor shave', price: 12000 }
                }
            }
        };

        // State management
        let selectedServices = [];
        let selectedPaymentMethod = null;
        let isProcessing = false;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the page - this will call all necessary setup functions
            initializePage();
            
            // Debug: Check if elements exist
            console.log('Elements found:', {
                selectedServices: document.getElementById('selected-services'),
                summaryServices: document.getElementById('summary-services'),
                subtotal: document.getElementById('subtotal'),
                serviceFee: document.getElementById('service-fee'),
                total: document.getElementById('total')
            });
        });

        // Load and display the selected shop information
        function loadSelectedShop() {
            try {
                // Get the saved shop info from localStorage
                const savedShop = localStorage.getItem('selectedBarber');
                console.log('Loaded shop data from localStorage:', savedShop);
                
                if (savedShop) {
                    const shopInfo = JSON.parse(savedShop);
                    console.log('Parsed shop info:', shopInfo);
                    
                    // Update the shop name
                    const shopNameEl = document.getElementById('shop-name');
                    if (shopNameEl) {
                        shopNameEl.textContent = shopInfo.name || 'Barber Shop';
                    }
                    
                    // Try to set the shop photo (if available)
                    const shopPhotoEl = document.getElementById('shop-photo');
                    const shopIconEl = document.getElementById('shop-icon');
                    
                    if (shopPhotoEl && shopInfo.photo) {
                        shopPhotoEl.src = shopInfo.photo;
                        shopPhotoEl.alt = shopInfo.name || 'Shop Photo';
                        shopPhotoEl.style.display = 'block';
                        if (shopIconEl) shopIconEl.style.display = 'none';
                    } else {
                        // If no photo, show the icon
                        if (shopPhotoEl) shopPhotoEl.style.display = 'none';
                        if (shopIconEl) shopIconEl.style.display = 'flex';
                    }
                    
                    return true;
                }
            } catch (error) {
                console.error('Error loading shop info:', error);
            }
            
            // If we get here, there was an error or no shop data
            const shopNameEl = document.getElementById('shop-name');
            if (shopNameEl) {
                shopNameEl.textContent = 'Barber Shop';
            }
            return false;
        }

        function initializePage() {
            // Set minimum date for appointment
            setMinDate();
            
            // Load selected services and shop info
            loadSelectedServices();
            loadSelectedShop();
            
            // Update summary with loaded services
            updateSummary();
            
            // Setup event listeners
            setupEventListeners();
            
            // Debug: Log the selected services
            console.log('Initialized page with services:', selectedServices);
        }

        function setupEventListeners() {
            // Payment method selection
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    selectPaymentMethod(this.dataset.payment);
                });
            });

            // Form submission
            document.getElementById('checkout-btn').addEventListener('click', handleCheckout);

            // Add service button
            document.getElementById('add-service-btn').addEventListener('click', function() {
                // Add a test service for debugging
                selectedServices.push({
                    id: 'test-' + Date.now(),
                    name: 'Test Service',
                    price: 25000,
                    description: 'Test service for debugging'
                });
                renderSelectedServices();
                updateSummary();
                showToast('Test service added for debugging', 'info');
                console.log('Services after adding:', selectedServices);
            });

            // Real-time validation
            const formInputs = ['first-name', 'last-name', 'email', 'phone', 'appointment-date', 'appointment-time'];
            formInputs.forEach(id => {
                document.getElementById(id).addEventListener('blur', function() {
                    validateField(id);
                });
            });
        }

        function loadSelectedServices() {
            try {
                // Load from localStorage
                const savedServices = localStorage.getItem('selectedServices');
                console.log('Loaded services from localStorage:', savedServices);
                
                if (savedServices) {
                    selectedServices = JSON.parse(savedServices);
                    console.log('Parsed services:', selectedServices);
                    
                    // Ensure all services have required fields
                    selectedServices = selectedServices.map(service => ({
                        id: service.id || 'service-' + Math.random().toString(36).substr(2, 9),
                        name: service.name || 'Unnamed Service',
                        price: Number(service.price) || 0,
                        description: service.description || 'Professional service'
                    }));
                } else {
                    // No saved services, use empty array instead of sample data
                    selectedServices = [];
                    console.log('No saved services found in localStorage');
                }
                
                // Update the UI
                renderSelectedServices();
                updateSummary();
                
            } catch (error) {
                console.error('Error loading services:', error);
                // Fallback to empty array on error
                selectedServices = [];
                renderSelectedServices();
                updateSummary();
            }
        }

        function renderSelectedServices() {
            const container = document.getElementById('selected-services');
            const summaryContainer = document.getElementById('summary-services');
            
            console.log('Rendering services:', {
                services: selectedServices,
                containerExists: !!container,
                summaryContainerExists: !!summaryContainer
            });
            
            try {
                if (!Array.isArray(selectedServices) || selectedServices.length === 0) {
                    console.log('No services to display');
                    if (container) {
                        container.innerHTML = '<p class="text-neutral-500 dark:text-neutral-400">No services selected. Please go back and select services.</p>';
                    }
                    if (summaryContainer) {
                        summaryContainer.innerHTML = '<p class="text-sm text-neutral-500">No services selected</p>';
                    }
                    return;
                }

                // Render detailed service list
                if (container) {
                    container.innerHTML = selectedServices.map(service => {
                        // Ensure service has required properties
                        const serviceId = service.id || 'service-' + Math.random().toString(36).substr(2, 9);
                        const serviceName = service.name || 'Unnamed Service';
                        const servicePrice = Number(service.price) || 0;
                        const serviceDesc = service.description || 'Professional service';
                        
                        return `
                            <div class="service-item flex items-center justify-between p-4 rounded-lg border border-neutral-200 dark:border-neutral-700 mb-3">
                                <div class="flex-1">
                                    <h4 class="font-semibold">${serviceName}</h4>
                                    <p class="text-sm text-neutral-500 dark:text-neutral-400">${serviceDesc}</p>
                                </div>
                                <div class="flex items-center gap-3">
                                    <span class="font-bold whitespace-nowrap">${servicePrice.toLocaleString()} MMK</span>
                                    <button onclick="removeService('${serviceId}')" class="text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors" aria-label="Remove service">
                                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        `;
                    }).join('');
                }

                // Render summary
                if (summaryContainer) {
                    summaryContainer.innerHTML = selectedServices.map(service => {
                        const serviceName = service.name || 'Service';
                        const servicePrice = Number(service.price) || 0;
                        
                        return `
                            <div class="flex justify-between text-sm mb-2">
                                <span class="truncate max-w-[180px]">${serviceName}</span>
                                <span class="font-medium whitespace-nowrap ml-2">${servicePrice.toLocaleString()} MMK</span>
                            </div>
                        `;
                    }).join('');
                }
                
                console.log('Services rendered successfully');
                
            } catch (error) {
                console.error('Error rendering services:', error);
                if (container) {
                    container.innerHTML = '<p class="text-red-500">Error loading services. Please try again.</p>';
                }
                if (summaryContainer) {
                    summaryContainer.innerHTML = '<p class="text-sm text-red-500">Error loading services</p>';
                }
            }
        }

        function removeService(serviceId) {
            selectedServices = selectedServices.filter(service => service.id !== serviceId);
            
            // Update localStorage immediately
            try {
                localStorage.setItem('selectedServices', JSON.stringify(selectedServices));
            } catch (error) {
                console.error('Failed to update localStorage:', error);
            }
            
            renderSelectedServices();
            updateSummary();
            showToast('Service removed', 'success');
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Update UI
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            document.querySelector(`[data-payment="${method}"]`).classList.add('selected');

            // Show/hide card details
            const cardDetails = document.getElementById('card-details');
            if (method === 'card') {
                cardDetails.classList.remove('hidden');
            } else {
                cardDetails.classList.add('hidden');
            }
        }

        function updateSummary() {
            const subtotal = selectedServices.reduce((sum, service) => sum + service.price, 0);
            const serviceFee = Math.round(subtotal * 0.1);
            const total = subtotal + serviceFee;

            console.log('Updating summary:', { subtotal, serviceFee, total });

            const subtotalEl = document.getElementById('subtotal');
            const serviceFeeEl = document.getElementById('service-fee');
            const totalEl = document.getElementById('total');

            if (subtotalEl) subtotalEl.textContent = `${subtotal.toLocaleString()} MMK`;
            if (serviceFeeEl) serviceFeeEl.textContent = `${serviceFee.toLocaleString()} MMK`;
            if (totalEl) totalEl.textContent = `${total.toLocaleString()} MMK`;
        }

        function setMinDate() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const dateStr = tomorrow.toISOString().split('T')[0];
            document.getElementById('appointment-date').setAttribute('min', dateStr);
        }

        function validateField(fieldId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(`${fieldId}-error`);
            let isValid = true;

            // Add null guard for error element
            if (!field) {
                console.warn(`Field not found: ${fieldId}`);
                return false;
            }
            
            if (!error) {
                console.warn(`Error element not found: ${fieldId}-error`);
                return false;
            }

            if (!field.value.trim()) {
                error.classList.remove('hidden');
                isValid = false;
            } else {
                error.classList.add('hidden');
            }

            // Email validation
            if (fieldId === 'email' && field.value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(field.value)) {
                    error.classList.remove('hidden');
                    error.textContent = 'Please enter a valid email';
                    isValid = false;
                }
            }

            // Date validation
            if (fieldId === 'appointment-date' && field.value) {
                const selectedDate = new Date(field.value);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                if (selectedDate <= today) {
                    error.classList.remove('hidden');
                    error.textContent = 'Please select a future date';
                    isValid = false;
                }
            }

            return isValid;
        }

        function validateForm() {
            const requiredFields = ['first-name', 'last-name', 'email', 'phone', 'appointment-date'];
            let isValid = true;

            requiredFields.forEach(fieldId => {
                if (!validateField(fieldId)) {
                    isValid = false;
                }
            });

            // Check if services are selected
            if (selectedServices.length === 0) {
                showToast('Please select at least one service', 'error');
                isValid = false;
            }

            // Check if payment method is selected
            if (!selectedPaymentMethod) {
                showToast('Please select a payment method', 'error');
                isValid = false;
            }

            // Card validation for card payment
            if (selectedPaymentMethod === 'card') {
                const cardNumber = document.getElementById('card-number');
                const expiry = document.getElementById('card-expiry');
                const cvv = document.getElementById('card-cvv');
                
                if (!cardNumber?.value.trim() || !expiry?.value.trim() || !cvv?.value.trim()) {
                    showToast('Please fill in all card details', 'error');
                    isValid = false;
                }
            }

            return isValid;
        }

        function generateBookingId() {
            const timestamp = Date.now();
            const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            return `PM${timestamp}${random}`;
        }

        async function handleCheckout() {
            if (isProcessing || !validateForm()) {
                return;
            }

            isProcessing = true;
            const btn = document.getElementById('checkout-btn');
            const originalText = btn.textContent;
            btn.disabled = true;
            btn.textContent = 'Processing...';

            try {
                // Generate unique booking ID
                const bookingId = generateBookingId();
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Store booking data
                const bookingData = {
                    id: bookingId,
                    services: selectedServices,
                    customer: {
                        firstName: document.getElementById('first-name')?.value,
                        lastName: document.getElementById('last-name')?.value,
                        email: document.getElementById('email')?.value,
                        phone: document.getElementById('phone')?.value
                    },
                    appointment: {
                        date: document.getElementById('appointment-date')?.value,
                        time: document.getElementById('appointment-time')?.value
                    },
                    payment: selectedPaymentMethod,
                    total: selectedServices.reduce((sum, service) => sum + service.price, 0) * 1.1,
                    timestamp: new Date().toISOString()
                };

                // Save to localStorage
                localStorage.setItem('lastBooking', JSON.stringify(bookingData));
                
                // Clear selected services after successful booking
                localStorage.removeItem('selectedServices');
                
                // Show success
                showSuccessModal(bookingId);
                
                console.log('Booking confirmed:', bookingData);
            } catch (error) {
                console.error('Booking error:', error);
                showToast('Booking failed. Please try again.', 'error');
            } finally {
                isProcessing = false;
                btn.disabled = false;
                btn.textContent = originalText;
            }
        }

        function showSuccessModal(bookingId) {
            const modal = document.getElementById('success-modal');
            const referenceEl = document.getElementById('booking-reference');
            
            if (referenceEl) {
                referenceEl.textContent = `#${bookingId}`;
            }
            
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeSuccessModal() {
            document.getElementById('success-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function toggleBookingDetails() {
            const detailsSection = document.getElementById('booking-details');
            const viewDetailsBtn = document.querySelector('button[onclick="toggleBookingDetails()"]');
            
            if (detailsSection.classList.contains('hidden')) {
                // Show details
                detailsSection.classList.remove('hidden');
                viewDetailsBtn.textContent = 'Hide Details';
                populateBookingDetails();
            } else {
                // Hide details
                detailsSection.classList.add('hidden');
                viewDetailsBtn.textContent = 'View Details';
            }
        }

        function populateBookingDetails() {
            const bookingData = JSON.parse(localStorage.getItem('lastBooking') || '{}');
            
            // Customer info
            document.getElementById('modal-customer-info').innerHTML = `
                <div class="flex items-center gap-2 mb-2">
                    <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Customer:</span>
                </div>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    ${bookingData.customer?.firstName || ''} ${bookingData.customer?.lastName || ''}
                </p>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    ${bookingData.customer?.email || ''}
                </p>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    ${bookingData.customer?.phone || ''}
                </p>
            `;
            
            // Services info
            const servicesList = (bookingData.services || []).map(service => 
                `<div class="flex justify-between text-sm">
                    <span>${service.name}</span>
                    <span class="font-medium">${service.price.toLocaleString()} MMK</span>
                </div>`
            ).join('');
            
            document.getElementById('modal-services-info').innerHTML = `
                <div class="flex items-center gap-2 mb-2">
                    <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Services:</span>
                </div>
                <div class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    ${servicesList}
                </div>
            `;
            
            // Appointment info
            document.getElementById('modal-appointment-info').innerHTML = `
                <div class="flex items-center gap-2 mb-2">
                    <svg class="w-4 h-4 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Appointment:</span>
                </div>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    ${bookingData.appointment?.date || ''} at ${bookingData.appointment?.time || ''}
                </p>
            `;
            
            // Payment info
            document.getElementById('modal-payment-info').innerHTML = `
                <div class="flex items-center gap-2 mb-2">
                    <svg class="w-4 h-4 text-orange-500" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/>
                        <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Payment:</span>
                </div>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    Method: ${bookingData.payment || 'Not specified'}
                </p>
                <p class="text-sm text-neutral-600 dark:text-neutral-400 ml-6">
                    Total: <span class="font-bold">${(bookingData.total || 0).toLocaleString()} MMK</span>
                </p>
            `;
        }

        function confirmGoHome() {
            if (confirm('Are you sure you want to leave? Your booking has been confirmed and saved.')) {
                window.location.href = '../index.html';
            }
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-500' : 
                           type === 'error' ? 'bg-red-500' : 'bg-blue-500';
            
            toast.className = `toast ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-2`;
            toast.innerHTML = `
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    ${type === 'success' ? '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>' :
                      type === 'error' ? '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>' :
                      '<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>'}
                </svg>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
</body>
</html>

